{"version":3,"sources":["components/header/HeaderWifiIcon.js","utils/geolocation.js","api/db.js","api/web.js","context/SnackBarProvider.js","components/home/Home.js","components/orders/hooks.js","components/orders/ImageList.js","components/orders/TaskList.js","components/orders/VideoList.js","components/orders/OrderDetail.js","components/orders/OrderList.js","components/orders/OrderIndex.js","App.js","index.js","components/header/Header.js","components/header/HeaderDrawer.js"],"names":["HeaderWifiIcon","useState","isOnline","setIsOnline","useEffect","window","addEventListener","checkInternet","navigator","onLine","fetch","process","method","mode","then","resp","ok","type","catch","e","convertDMSToDD","degrees","minutes","seconds","direction","dd","getGeolocationFromImage","imageFile","Promise","resolve","reject","EXIF","allMetaData","this","console","log","tags","GPSLatitude","GPSLatitudeRef","GPSLongitude","GPSLongitudeRef","latDegree","latMinute","latSecond","latDirection","lonDegree","lonMinute","lonSecond","lonDirection","lat","lng","origin","parseGeolocationTags","getGeoloacationFromDevice","geolocation","getCurrentPosition","position","coords","latitude","longitude","err","timeout","shortid","PouchDB","plugin","PouchFindPlugin","on","dbName","syncMetadataStore","ordersStore","imagesStore","videosStore","tasksStore","DEFAULT_SYNC_METADATA","_id","downloadDisabled","downloadedAt","uploadDisabled","uploadedAt","deleteDisabled","deletedAt","getSyncMetadataStore","a","forceNew","getOrdersStore","createIndex","index","fields","getTasksStore","getImagesStore","getVideosStore","cleanDatabases","cleanDatabase","metadataResult","orderResult","taskResult","imagesResult","videosResult","metadata","orders","tasks","images","video","getStoreFn","store","destroy","result","syncToRemote","syncStoreToRemote","remoteName","getLocalStoreFn","remoteDB","info","localStore","replicate","to","error","getSyncMetadata","db","get","name","updateSyncMetadata","data","previous","doc","_rev","put","getOrders","find","selector","createdAt","$gte","sort","docs","getOrderById","id","addOrder","order","getTasksByOrderId","orderId","response","ids","map","allDocs","keys","include_docs","rows","row","getTaskById","addTask","task","Date","toISOString","completed","updateTask","deleteTask","remove","getImagesByOrderId","attachments","binary","getImageById","addImage","location","_attachments","file","content_type","deleteImage","image","getVideosByOrderId","getVideoById","addVideo","deleteVideo","REST_API_URL","fetchOrders","json","fetchTasksByOrderId","SnackBarContext","createContext","SnackBarProvider","children","severity","setSeverity","message","setMessage","open","setOpen","addAlert","alert","handleClose","event","reason","value","showInfoAlert","showSuccessAlert","showWarningAlert","showErrorAlert","Provider","Snackbar","autoHideDuration","onClose","Alert","elevation","variant","Home","useContext","syncMetadata","setSyncMetadata","loading","setLoading","fetchSyncMetadata","onClickDownload","length","all","ordersSavedToDb","orderIds","flat","updatedMetadata","onClickUpload","onClickDelete","Grid","container","spacing","item","xs","Typography","Button","color","startIcon","onClick","disabled","justify","alignItems","CircularProgress","size","style","marginTop","useStyles","makeStyles","theme","inputFile","display","icon","backdrop","zIndex","drawer","backdropContent","maxWidth","maxHeight","ImageList","classes","initialValue","isError","setIsError","isLoading","setIsLoading","setData","shouldReload","setShouldReload","loadData","now","valueOf","useGetImagesByOrderId","reload","selectedImage","setSelectedImage","handleOpenImage","onChangeImageUpload","element","document","getElementById","files","handleDeleteImage","Backdrop","className","src","alt","accept","onChange","htmlFor","IconButton","component","Paper","GridList","cellHeight","cols","GridListTile","key","height","ListSubheader","backgroundColor","imageURL","URL","createObjectURL","GridListTileBar","title","subtitle","actionIcon","TaskList","useGetTasksByOrderId","newTaskDescription","setNewTaskDescription","handleAddTask","description","handleCompleteTask","target","checked","handleDeleteTask","Dialog","fullWidth","DialogTitle","DialogContent","TextField","autoFocus","label","DialogActions","List","subheader","ListItem","Switch","edge","ListItemText","primary","ListItemSecondaryAction","VideoList","useGetVideosByOrderId","videos","selectedVideo","setSelectedVideo","handleOpenVideo","onChangeVideoUpload","handleDeleteVideo","controls","videoURL","OrderDetail","useParams","useGetOrderById","OrderList","url","useRouteMatch","useGetOrders","button","Link","secondary","station","OrderRouter","path","exact","main","paddingTop","App","basename","CssBaseline","Header","Container","ReactDOM","render","AddToHomeScreen","brandName","root","flexGrow","menuButton","marginRight","iOS","browser","test","userAgent","toggleDrawer","anchor","onOpen","disableBackdropTransition","disableDiscovery","aria-label","ListItemLink","props","renderLink","React","useMemo","forwardRef","itemProps","ref","width","HeaderDrawer"],"mappings":"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","file":"static/js/main.480f8903.chunk.js","sourcesContent":["import WifiIcon from '@material-ui/icons/Wifi';\nimport WifiOffIcon from '@material-ui/icons/WifiOff';\nimport React, { useEffect, useState } from 'react';\n\nconst REST_API_URL = process.env.REACT_APP_REST_API_ENDPOINT;\n\nexport const HeaderWifiIcon = () => {\n    const [isOnline, setIsOnline] = useState();\n\n    useEffect(() => {\n        window.addEventListener('online', checkInternet);\n        window.addEventListener('offline', checkInternet);\n        checkInternet();\n    },[])\n\n    const checkInternet = () => {\n        if (navigator.onLine) {\n            fetch(`${REST_API_URL}/orders`, {method: 'HEAD', mode: 'no-cors'}).then(function (resp) {\n                setIsOnline(resp && (resp.ok || resp.type === 'opaque') ? true : false)\n            }).catch(e => {\n                setIsOnline(false)\n            });\n        } else {\n            // handle offline status\n            setIsOnline(false)\n        }\n    }\n    return isOnline ? <WifiIcon/> : <WifiOffIcon/>\n}\n","import * as EXIF from 'exif-js';\n\nfunction convertDMSToDD(degrees, minutes, seconds, direction) {\n  let dd = degrees + minutes / 60 + seconds / 3600;\n  if (direction === 'S' || direction === 'W') {\n    dd = dd * -1;\n  }\n  return dd;\n}\n\nfunction parseGeolocationTags(tags) {\n  const {\n    GPSLatitude,\n    GPSLatitudeRef,\n    GPSLongitude,\n    GPSLongitudeRef,\n  } = tags;\n\n  if (\n    !GPSLatitude ||\n    !GPSLatitudeRef ||\n    !GPSLongitude ||\n    !GPSLongitudeRef\n  ) {\n    return null;\n  }\n\n  const latDegree = GPSLatitude[0];\n  const latMinute = GPSLatitude[1];\n  const latSecond = GPSLatitude[2];\n  const latDirection = GPSLatitudeRef;\n\n  const lonDegree = GPSLongitude[0];\n  const lonMinute = GPSLongitude[1];\n  const lonSecond = GPSLongitude[2];\n  const lonDirection = GPSLongitudeRef;\n\n  const lat = convertDMSToDD(\n    latDegree,\n    latMinute,\n    latSecond,\n    latDirection,\n  );\n\n  const lng = convertDMSToDD(\n    lonDegree,\n    lonMinute,\n    lonSecond,\n    lonDirection,\n  );\n\n  return {\n    lat,\n    lng,\n    origin: 'EXIF',\n  };\n}\n\nexport const getGeolocationFromImage = (imageFile) => {\n  return new Promise((resolve, reject) => {\n    EXIF.getData(imageFile, function () {\n      const allMetaData = EXIF.getAllTags(this);\n      console.log('==>> EXIF ALL', allMetaData);\n      resolve(parseGeolocationTags(allMetaData));\n    });\n  });\n};\n\nexport const getGeoloacationFromDevice = () => {\n  return new Promise((resolve, reject) => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        // success\n        (position) => {\n          console.log(position);\n          resolve({\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n            origin: 'DEVICE',\n          });\n        },\n        // error\n        (err) => {\n          // reject(err);\n          resolve(null);\n          // error.code can be:\n          //   0: unknown error\n          //   1: permission denied\n          //   2: position unavailable (error response from location provider)\n          //   3: timed out\n        },\n        // options\n        {\n          timeout: 10000,\n          // enableHighAccuracy: true, // slower to resolve and uses more battery\n        },\n      );\n    } else {\n      console.log(\n        'Geolocation is not supported for this Browser/OS.',\n      );\n      reject();\n    }\n  });\n};\n","import PouchDB from 'pouchdb';\nimport PouchFindPlugin from 'pouchdb-find';\nimport * as shortid from 'shortid';\nimport { getGeoloacationFromDevice, getGeolocationFromImage } from '../utils/geolocation';\n\nshortid.characters(\n  '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$@',\n);\n\n// enable queries\n// https://pouchdb.com/guides/mango-queries.html\nPouchDB.plugin(PouchFindPlugin);\n\nPouchDB.on('destroyed', function (dbName) {\n  // called whenever a db is destroyed.\n  console.log('==>> POUCHEDB destroyed', dbName);\n});\n\nconst REMOTE_DB_URL = process.env.REACT_APP_REMOTE_DATABASE_ENDPOINT;\n\nconst SYNC_METADATA = 'sync-metadata';\nconst ORDERS = 'orders';\nconst TASKS = 'tasks';\nconst IMAGES = 'images';\nconst VIDEOS = 'videos';\n\nexport const DEFAULT_SYNC_METADATA = {\n  _id: 'default',\n  downloadDisabled: false,\n  downloadedAt: '',\n  uploadDisabled: true,\n  uploadedAt: '',\n  deleteDisabled: true,\n  deletedAt: '',\n};\n\n// ####################################\n// DATABASES\n// ####################################\n\nlet syncMetadataStore;\nlet ordersStore;\nlet imagesStore;\nlet videosStore;\nlet tasksStore;\n\nasync function getSyncMetadataStore(forceNew = false) {\n  if (!syncMetadataStore || forceNew) {\n    syncMetadataStore = new PouchDB(SYNC_METADATA);\n  }\n  return syncMetadataStore;\n}\n\nasync function getOrdersStore(forceNew = false) {\n  if (!ordersStore || forceNew) {\n    ordersStore = new PouchDB(ORDERS);\n\n    await ordersStore.createIndex({\n      index: { fields: ['createdAt'] },\n    });\n  }\n  return ordersStore;\n}\n\nasync function getTasksStore(forceNew = false) {\n  if (!tasksStore || forceNew) {\n    tasksStore = new PouchDB(TASKS);\n\n    await tasksStore.createIndex({\n      index: { fields: ['createdAt', 'orderId'] },\n    });\n  }\n  return tasksStore;\n}\n\nasync function getImagesStore(forceNew = false) {\n  if (!imagesStore || forceNew) {\n    imagesStore = new PouchDB(IMAGES);\n\n    await imagesStore.createIndex({\n      index: { fields: ['createdAt', 'orderId'] },\n    });\n  }\n  return imagesStore;\n}\n\nasync function getVideosStore(forceNew = false) {\n  if (!videosStore || forceNew) {\n    videosStore = new PouchDB(VIDEOS);\n\n    await videosStore.createIndex({\n      index: { fields: ['createdAt', 'orderId'] },\n    });\n  }\n  return videosStore;\n}\n\nexport async function cleanDatabases() {\n  const metadataResult = await cleanDatabase(getSyncMetadataStore);\n  const orderResult = await cleanDatabase(getOrdersStore);\n  const taskResult = await cleanDatabase(getTasksStore);\n  const imagesResult = await cleanDatabase(getImagesStore);\n  const videosResult = await cleanDatabase(getVideosStore);\n\n  return {\n    metadata: metadataResult.ok,\n    orders: orderResult.ok,\n    tasks: taskResult.ok,\n    images: imagesResult.ok,\n    video: videosResult.ok,\n  };\n}\n\nasync function cleanDatabase(getStoreFn) {\n  // delete the store\n  const store = await getStoreFn();\n  const result = await store.destroy();\n  if (result.ok) {\n    // re-create\n    await getStoreFn(true);\n  }\n  return result;\n}\n\n// ####################################\n// SYNC LOCAL DATA TO SERVER\n// ####################################\n\nexport const syncToRemote = async () => {\n  // tasks\n  await syncStoreToRemote(TASKS, getTasksStore);\n\n  // images\n  await syncStoreToRemote(IMAGES, getImagesStore);\n\n  // videos\n  await syncStoreToRemote(VIDEOS, getVideosStore);\n\n  return Promise.resolve();\n};\n\nconst syncStoreToRemote = async (remoteName, getLocalStoreFn) => {\n  const remoteDB = new PouchDB(\n    `${REMOTE_DB_URL}/${remoteName}`,\n  );\n  console.log(await remoteDB.info());\n\n  const localStore = await getLocalStoreFn();\n\n  return new Promise((resolve, reject) => {\n    localStore.replicate\n      .to(remoteDB)\n      .on('complete', () => {\n        console.log(remoteName, 'SYNC COMPLETED');\n        resolve();\n      })\n      .on('error', (err) => {\n        console.log(remoteName, 'SYNC ERROR');\n        console.error(err);\n        reject(err);\n      });\n  });\n};\n\n// ####################################\n// SYNC METADATA STORE\n// ####################################\n\nexport async function getSyncMetadata() {\n  try {\n    const db = await getSyncMetadataStore();\n    return await db.get('default');\n  } catch (err) {\n    if (err && err.name === 'not_found') {\n      return DEFAULT_SYNC_METADATA;\n    }\n  }\n}\n\nexport async function updateSyncMetadata(data) {\n  const db = await getSyncMetadataStore();\n  const previous = await getSyncMetadata();\n  const doc =\n    previous && previous._rev\n      ? { ...data, _rev: previous._rev }\n      : data;\n  // update\n  await db.put(doc);\n  // return updated version\n  return await db.get('default');\n}\n\n// ####################################\n// ORDERS STORE\n// ####################################\n\nexport async function getOrders() {\n  const db = await getOrdersStore();\n  const result = await db.find({\n    selector: {\n      createdAt: { $gte: null },\n    },\n    sort: ['createdAt'],\n  });\n  return result.docs;\n}\n\nexport async function getOrderById(id) {\n  const db = await getOrdersStore();\n  return await db.get(id);\n}\n\nexport async function addOrder(order) {\n  const db = await getOrdersStore();\n  // save\n  const result = await db.put(order);\n  // return the most recebt version\n  return getOrderById(result.id);\n}\n\n// ####################################\n// TASKS STORE\n// ####################################\n\nexport async function getTasksByOrderId(orderId) {\n  const db = await getTasksStore();\n  const response = await db.find({\n    selector: {\n      orderId,\n      createdAt: { $gte: null },\n    },\n    sort: ['createdAt'],\n  });\n  // collect all ids\n  const ids = response.docs.map((doc) => doc._id);\n  // get by ids\n  const result = await db.allDocs({\n    keys: ids,\n    include_docs: true,\n  });\n  return result.rows.map((row) => row.doc);\n}\n\nexport async function getTaskById(id) {\n  const db = await getTasksStore();\n  return await db.get(id);\n}\n\nexport async function addTask(task) {\n  const db = await getTasksStore();\n  // save\n  const result = await db.put({\n    ...task,\n    _id: shortid.generate(),\n    createdAt: new Date().toISOString(),\n    completed: false,\n  });\n  // return saved doc\n  return getTaskById(result.id);\n}\n\nexport async function updateTask(task) {\n  const db = await getTasksStore();\n  // get task\n  const { _rev } = await getTaskById(task._id);\n  // save\n  const result = await db.put({\n    ...task,\n    _rev,\n  });\n  // return saved doc\n  return getTaskById(result.id);\n}\n\nexport async function deleteTask(task) {\n  const db = await getTasksStore();\n  // load latest rev\n  const doc = await db.get(task._id);\n  // remove\n  return db.remove(doc);\n}\n\n// ####################################\n// IMAGES STORE\n// ####################################\n\nexport async function getImagesByOrderId(orderId) {\n  const db = await getImagesStore();\n  // find does not return the attachments\n  const response = await db.find({\n    selector: {\n      orderId,\n      createdAt: { $gte: null },\n    },\n    sort: ['createdAt'],\n  });\n  // collect all ids\n  const ids = response.docs.map((doc) => doc._id);\n  // get by ids\n  const result = await db.allDocs({\n    keys: ids,\n    include_docs: true,\n    attachments: true,\n    binary: true,\n  });\n  return result.rows.map((row) => row.doc);\n}\n\nexport async function getImageById(id) {\n  const db = await getImagesStore();\n  return await db.get(id, {\n    attachments: true,\n    binary: true,\n  });\n}\n\nexport async function addImage(orderId, imageFile) {\n  const db = await getImagesStore();\n  const { name, type } = imageFile;\n  // try to retrieve location from EXIF tags\n  let location = await getGeolocationFromImage(imageFile);\n  // ask current location from device\n  if (!location) {\n    location = await getGeoloacationFromDevice();\n  }\n  // inline attachment\n  const doc = {\n    _id: shortid.generate(),\n    orderId,\n    name,\n    location,\n    createdAt: new Date().toISOString(),\n    _attachments: {\n      file: {\n        content_type: type,\n        data: imageFile,\n      },\n    },\n  };\n  // save\n  const result = await db.put(doc);\n  // return saved image\n  return getImageById(result.id);\n}\n\nexport async function deleteImage(image) {\n  const db = await getImagesStore();\n  // load latest rev\n  const doc = await db.get(image._id);\n  // remove\n  return db.remove(doc);\n}\n\n// ####################################\n// VIDEOS STORE\n// ####################################\n\nexport async function getVideosByOrderId(orderId) {\n  const db = await getVideosStore();\n  // find does not return the attachments\n  const response = await db.find({\n    selector: {\n      orderId,\n      createdAt: { $gte: null },\n    },\n    sort: ['createdAt'],\n  });\n  // collect all ids\n  const ids = response.docs.map((doc) => doc._id);\n  // get by ids\n  const result = await db.allDocs({\n    keys: ids,\n    include_docs: true,\n    attachments: true,\n    binary: true,\n  });\n  return result.rows.map((row) => row.doc);\n}\n\nexport async function getVideoById(id) {\n  const db = await getVideosStore();\n  return await db.get(id, {\n    attachments: true,\n    binary: true,\n  });\n}\n\nexport async function addVideo(orderId, imageFile) {\n  const db = await getVideosStore();\n  const { name, type } = imageFile;\n  // inline attachment\n  const doc = {\n    _id: shortid.generate(),\n    orderId,\n    name,\n    createdAt: new Date().toISOString(),\n    _attachments: {\n      file: {\n        content_type: type,\n        data: imageFile,\n      },\n    },\n  };\n  // save\n  const result = await db.put(doc);\n  // return saved image\n  return getVideoById(result.id);\n}\n\nexport async function deleteVideo(video) {\n  const db = await getVideosStore();\n  // load latest rev\n  const doc = await db.get(video._id);\n  // remove\n  return db.remove(doc);\n}\n","// web fetch\nconst REST_API_URL = process.env.REACT_APP_REST_API_ENDPOINT;\n\nexport async function fetchOrders() {\n    const response = await fetch(\n        `${REST_API_URL}/orders`,\n    );\n    return response.json();\n}\n\nexport async function fetchOrderById(id) {\n    const response = await fetch(\n        `${REST_API_URL}/orders/${id}`,\n    );\n    return response.json();\n}\n\nexport async function fetchTasksByOrderId(orderId) {\n    const response = await fetch(\n        `${REST_API_URL}/tasks/${orderId}`,\n    );\n    return response.json();\n}\n","import { Snackbar } from '@material-ui/core';\nimport Alert from '@material-ui/lab/Alert';\nimport React, { createContext, useState } from 'react';\n\nexport const SnackBarContext = createContext();\n\nexport function SnackBarProvider({ children }) {\n  const [severity, setSeverity] = useState('info');\n  const [message, setMessage] = useState('');\n  const [open, setOpen] = useState(false);\n\n  const addAlert = (alert, severity) => {\n    setMessage(alert);\n    setSeverity('success');\n    setOpen(true);\n  };\n\n  const showInfoAlert = (alert) => addAlert(alert, 'info');\n  const showSuccessAlert = (alert) => addAlert(alert, 'success');\n  const showWarningAlert = (alert) => addAlert(alert, 'warning');\n  const showErrorAlert = (alert) => addAlert(alert, 'error');\n\n  const handleClose = (event, reason) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n    setOpen(false);\n  };\n\n  const value = {\n    showInfoAlert,\n    showSuccessAlert,\n    showWarningAlert,\n    showErrorAlert,\n  };\n\n  return (\n    <>\n      <SnackBarContext.Provider value={value}>\n        {children}\n        <Snackbar\n          message={message}\n          open={open}\n          autoHideDuration={6000}\n          onClose={handleClose}\n        >\n          <Alert\n            elevation={6}\n            variant=\"filled\"\n            onClose={handleClose}\n            severity={severity}\n          >\n            {message}\n          </Alert>\n        </Snackbar>\n      </SnackBarContext.Provider>\n    </>\n  );\n}\n","import { Button, CircularProgress, Grid, Typography } from '@material-ui/core';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { addOrder, addTask, cleanDatabases, DEFAULT_SYNC_METADATA, getSyncMetadata, syncToRemote, updateSyncMetadata } from '../../api/db';\nimport { fetchOrders, fetchTasksByOrderId } from '../../api/web';\nimport { SnackBarContext } from '../../context/SnackBarProvider';\n\nexport default function Home() {\n  const { showSuccessAlert, showErrorAlert } = useContext(\n    SnackBarContext,\n  );\n\n  // load sync metadata\n  const [syncMetadata, setSyncMetadata] = useState(\n    DEFAULT_SYNC_METADATA,\n  );\n\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    async function fetchSyncMetadata() {\n      try {\n        const response = await getSyncMetadata();\n        setSyncMetadata(response);\n      } catch (err) {\n        console.error(err);\n      }\n    }\n    fetchSyncMetadata();\n  }, []);\n\n  const onClickDownload = async (event) => {\n    try {\n      setLoading(true);\n\n      // fetch data from web api\n      const orders = await fetchOrders();\n\n      if (orders.length > 0) {\n        const ordersSavedToDb = await Promise.all(\n          orders.map((order) =>\n            // pouchdb needs an _id as key\n            addOrder({ ...order, _id: order.id }),\n          ),\n        );\n\n        const orderIds = ordersSavedToDb.map((order) => order._id);\n\n        const tasks = await Promise.all(\n          orderIds.map((orderId) => fetchTasksByOrderId(orderId)),\n        );\n\n        // pouchdb needs an _id as key\n        await Promise.all(\n          tasks\n            .flat()\n            .map((task) => addTask({ ...task, _id: addTask.id })),\n        );\n\n        // save metadata in the database\n        const updatedMetadata = await updateSyncMetadata({\n          ...syncMetadata,\n          downloadDisabled: true,\n          uploadDisabled: false,\n          deleteDisabled: false,\n        });\n\n        // update sync metadata state\n        setSyncMetadata(updatedMetadata);\n      }\n\n      showSuccessAlert('Data loaded from server successfuly');\n    } catch (err) {\n      showErrorAlert('Error loading data from server');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onClickUpload = async (event) => {\n    try {\n      setLoading(true);\n\n      await syncToRemote();\n\n      // save metadata in the database\n      const updatedMetadata = await updateSyncMetadata({\n        ...syncMetadata,\n        downloadDisabled: true,\n        uploadDisabled: true,\n        deleteDisabled: false,\n      });\n\n      // // update sync metadata state\n      setSyncMetadata(updatedMetadata);\n\n      showSuccessAlert('Data synced back to server successfuly');\n    } catch (err) {\n      showErrorAlert('Error syncing data back to server');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onClickDelete = async (event) => {\n    try {\n      setLoading(true);\n\n      // delete databases\n      const result = await cleanDatabases();\n      console.log(result);\n\n      // restore sync metadata default\n      setSyncMetadata(await getSyncMetadata());\n\n      showSuccessAlert('Local database cleaned successfuly');\n    } catch (err) {\n      showErrorAlert('Error cleaning local database');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div>\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <Typography variant=\"h5\">Home</Typography>\n        </Grid>\n        <Grid item xs={12}>\n          <Button\n            variant=\"contained\"\n            color=\"default\"\n            startIcon={<CloudDownloadIcon />}\n            onClick={onClickDownload}\n            disabled={syncMetadata.downloadDisabled || loading}\n          >\n            Load data from server\n          </Button>\n        </Grid>\n        <Grid item xs={12}>\n          <Button\n            variant=\"contained\"\n            color=\"default\"\n            startIcon={<CloudUploadIcon />}\n            onClick={onClickUpload}\n            disabled={syncMetadata.uploadDisabled || loading}\n          >\n            Sync local data to server\n          </Button>\n        </Grid>\n        <Grid item xs={12}>\n          <Button\n            variant=\"contained\"\n            color=\"default\"\n            startIcon={<DeleteIcon />}\n            onClick={onClickDelete}\n            disabled={syncMetadata.deleteDisabled || loading}\n          >\n            Clean my local data\n          </Button>\n        </Grid>\n        {loading && (\n          <Grid\n            item\n            xs={12}\n            container\n            direction=\"column\"\n            justify=\"center\"\n            alignItems=\"center\"\n          >\n            <CircularProgress size={40} style={{ marginTop: 50 }} />\n          </Grid>\n        )}\n      </Grid>\n    </div>\n  );\n}\n","import { useEffect, useState } from 'react';\nimport { getImagesByOrderId, getOrderById, getOrders, getTasksByOrderId, getVideosByOrderId } from '../../api/db';\n\nexport const useGetOrders = (initialValue) => {\n  const [isError, setIsError] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [data, setData] = useState(initialValue);\n  const [shouldReload, setShouldReload] = useState(0);\n\n  useEffect(() => {\n    async function loadData() {\n      setIsLoading(true);\n      setIsError(false);\n      try {\n        setData(await getOrders());\n      } catch (err) {\n        console.error(err);\n        setIsError(true);\n      }\n      setIsLoading(false);\n    }\n\n    loadData();\n  }, [shouldReload]);\n\n  function reload() {\n    setShouldReload(Date.now().valueOf());\n  }\n\n  return [data, isLoading, isError, reload];\n};\n\nexport const useGetOrderById = (id, initialValue) => {\n  const [isError, setIsError] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [data, setData] = useState(initialValue);\n  const [shouldReload, setShouldReload] = useState(0);\n\n  useEffect(() => {\n    async function loadData() {\n      setIsLoading(true);\n      setIsError(false);\n      try {\n        setData(await getOrderById(id));\n      } catch (err) {\n        console.error(err);\n        setIsError(true);\n      }\n      setIsLoading(false);\n    }\n\n    loadData();\n  }, [id, shouldReload]);\n\n  function reload() {\n    setShouldReload(Date.now().valueOf());\n  }\n\n  return [data, isLoading, isError, reload];\n};\n\nexport const useGetTasksByOrderId = (orderId, initialValue) => {\n  const [isError, setIsError] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [data, setData] = useState(initialValue);\n  const [shouldReload, setShouldReload] = useState(0);\n\n  useEffect(() => {\n    async function loadData() {\n      setIsLoading(true);\n      setIsError(false);\n      try {\n        setData(await getTasksByOrderId(orderId));\n      } catch (err) {\n        console.error(err);\n        setIsError(true);\n      }\n      setIsLoading(false);\n    }\n\n    loadData();\n  }, [orderId, shouldReload]);\n\n  function reload() {\n    setShouldReload(Date.now().valueOf());\n  }\n\n  return [data, isLoading, isError, reload];\n};\n\nexport const useGetImagesByOrderId = (orderId, initialValue) => {\n  const [isError, setIsError] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [data, setData] = useState(initialValue);\n  const [shouldReload, setShouldReload] = useState(0);\n\n  useEffect(() => {\n    async function loadData() {\n      setIsLoading(true);\n      setIsError(false);\n      try {\n        setData(await getImagesByOrderId(orderId));\n      } catch (err) {\n        console.error(err);\n        setIsError(true);\n      }\n      setIsLoading(false);\n    }\n\n    loadData();\n  }, [orderId, shouldReload]);\n\n  function reload() {\n    setShouldReload(Date.now().valueOf());\n  }\n\n  return [data, isLoading, isError, reload];\n};\n\nexport const useGetVideosByOrderId = (orderId, initialValue) => {\n  const [isError, setIsError] = useState(false);\n  const [isLoading, setIsLoading] = useState(false);\n  const [data, setData] = useState(initialValue);\n  const [shouldReload, setShouldReload] = useState(0);\n\n  useEffect(() => {\n    async function loadData() {\n      setIsLoading(true);\n      setIsError(false);\n      try {\n        setData(await getVideosByOrderId(orderId));\n      } catch (err) {\n        console.error(err);\n        setIsError(true);\n      }\n      setIsLoading(false);\n    }\n\n    loadData();\n  }, [orderId, shouldReload]);\n\n  function reload() {\n    setShouldReload(Date.now().valueOf());\n  }\n\n  return [data, isLoading, isError, reload];\n};\n","import { Backdrop, Grid, GridList, GridListTile, GridListTileBar, IconButton, ListSubheader, makeStyles, Paper } from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport PhotoCamera from '@material-ui/icons/PhotoCamera';\nimport React, { useContext, useState } from 'react';\nimport { addImage, deleteImage } from '../../api/db';\nimport { SnackBarContext } from '../../context/SnackBarProvider';\nimport { useGetImagesByOrderId } from './hooks';\n\nconst useStyles = makeStyles((theme) => ({\n  inputFile: {\n    display: 'none',\n  },\n  icon: {\n    color: 'rgba(255, 255, 255, 0.54)',\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n  },\n  backdropContent: {\n    maxWidth: '95%',\n    maxHeight: '95%',\n  },\n}));\n\nexport default function ImageList({ orderId }) {\n  const classes = useStyles();\n\n  const { showSuccessAlert, showErrorAlert } = useContext(\n    SnackBarContext,\n  );\n\n  const [images, isLoading, isError, reload] = useGetImagesByOrderId(\n    orderId,\n    [],\n  );\n  const [open, setOpen] = useState(false);\n  const [selectedImage, setSelectedImage] = useState(false);\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleOpenImage = (image) => () => {\n    // clicked image\n    setSelectedImage(image);\n    // open backdrop\n    setOpen(!open);\n  };\n\n  const onChangeImageUpload = async (event) => {\n    try {\n      const element = document.getElementById('input-image-file');\n      if (element.files && element.files[0]) {\n        await addImage(orderId, element.files[0]);\n        reload();\n        // show message\n        showSuccessAlert('Image uploaded');\n      }\n    } catch (err) {\n      showErrorAlert(`Error uploading image (${err.message})`);\n    }\n  };\n\n  const handleDeleteImage = (image) => async (event) => {\n    try {\n      // delete\n      await deleteImage(image);\n      // reload images\n      reload();\n      // show message\n      showSuccessAlert('Image removed');\n    } catch (err) {\n      showErrorAlert(`Error removing image (${err.message})`);\n    }\n  };\n\n  // const onClickMap = (data) => (event) => {\n  //   console.log('==>> onClickMap', data);\n\n  //   if (!data) {\n  //     return;\n  //   }\n\n  //   const { lat, lng } = data;\n\n  //   if (['iPhone', 'iPad', 'iPod'].includes(navigator.platform)) {\n  //     const win = window.open(\n  //       `maps://maps.google.com/maps?daddr=${lat},${lng}&amp;ll=`,\n  //       '_top',\n  //     );\n  //     return win.focus();\n  //   }\n  //   /* default to Google */\n  //   const win = window.open(\n  //     `https://maps.google.com/maps?q=${lat},${lng}`,\n  //     '_blank',\n  //   );\n  //   return win.focus();\n  // };\n\n  return (\n    <>\n      {/* BACKDROP */}\n\n      <Backdrop\n        className={classes.backdrop}\n        open={open}\n        onClick={handleClose}\n      >\n        {selectedImage && (\n          <img\n            className={classes.backdropContent}\n            src={selectedImage}\n            alt=\"\"\n          />\n        )}\n      </Backdrop>\n\n      {/* ACTIONS */}\n\n      <Grid item container xs={12} direction=\"row\" justify=\"flex-end\">\n        <Grid item>\n          <input\n            type=\"file\"\n            accept=\"image/*\"\n            id=\"input-image-file\"\n            className={classes.inputFile}\n            onChange={onChangeImageUpload}\n          />\n          <label htmlFor=\"input-image-file\">\n            <IconButton color=\"primary\" component=\"span\">\n              <PhotoCamera />\n            </IconButton>\n          </label>\n        </Grid>\n      </Grid>\n\n      {/* LIST */}\n\n      <Grid item xs={12}>\n        <Paper elevation={1}>\n          <GridList cellHeight={180} cols={3}>\n            <GridListTile\n              key=\"subheader-image\"\n              cols={3}\n              style={{ height: 'auto' }}\n            >\n              <ListSubheader\n                component=\"div\"\n                color=\"primary\"\n                style={{ backgroundColor: '#E5E5E5' }}\n              >\n                Images\n                {!isLoading && images.length === 0\n                  ? ' (No items to display)'\n                  : ''}\n                {isLoading ? ' (Loading...)' : ''}\n                {isError ? ' (Error loading images)' : ''}\n              </ListSubheader>\n            </GridListTile>\n\n            {images &&\n              images.map((image) => {\n                const imageURL = URL.createObjectURL(\n                  image._attachments.file.data,\n                );\n                return (\n                  <GridListTile\n                    key={image._id}\n                    cols={1}\n                    onClick={handleOpenImage(imageURL)}\n                  >\n                    <img src={imageURL} alt={image.name} />\n                    <GridListTileBar\n                      title={image.name}\n                      subtitle={\n                        image.location\n                          ? `${image.location.lat}, ${image.location.lng}`\n                          : 'No location'\n                      }\n                      actionIcon={\n                        <IconButton\n                          className={classes.icon}\n                          onClick={handleDeleteImage(image)}\n                        >\n                          <DeleteIcon />\n                        </IconButton>\n                      }\n                    />\n                  </GridListTile>\n                );\n              })}\n          </GridList>\n        </Paper>\n      </Grid>\n    </>\n  );\n}\n","import { Button, Dialog, DialogActions, DialogContent, DialogTitle, Grid, IconButton, List, ListItem, ListItemSecondaryAction, ListItemText, ListSubheader, Paper, Switch, TextField } from '@material-ui/core';\nimport AddIcon from '@material-ui/icons/Add';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport React, { useContext, useState } from 'react';\nimport { addTask, deleteTask, updateTask } from '../../api/db';\nimport { SnackBarContext } from '../../context/SnackBarProvider';\nimport { useGetTasksByOrderId } from './hooks';\n\nexport default function TaskList({ orderId }) {\n  const { showSuccessAlert, showErrorAlert } = useContext(\n    SnackBarContext,\n  );\n  const [tasks, isLoading, isError, reload] = useGetTasksByOrderId(\n    orderId,\n    [],\n  );\n  const [open, setOpen] = useState(false);\n  const [newTaskDescription, setNewTaskDescription] = useState(false);\n\n  const onChange = (event) => {\n    setNewTaskDescription(event.target.value);\n  };\n\n  const handleClickOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  const handleAddTask = async () => {\n    try {\n      // save task\n      await addTask({\n        orderId,\n        description: newTaskDescription,\n      });\n      // close dialog\n      handleClose();\n      // reload tasks\n      reload();\n      // show message\n      showSuccessAlert('Task added');\n    } catch (err) {\n      showErrorAlert(`Error addding task (${err.message})`);\n    }\n  };\n\n  const handleCompleteTask = (task) => async (event) => {\n    try {\n      await updateTask({\n        ...task,\n        completed: event.target.checked,\n      });\n      reload();\n    } catch (err) {\n      showErrorAlert(`Error completiing task (${err.message})`);\n    }\n  };\n\n  const handleDeleteTask = (task) => async (event) => {\n    try {\n      // delete task\n      await deleteTask(task);\n      // reload tasks\n      reload();\n      // show message\n      showSuccessAlert('Task removed');\n    } catch (err) {\n      showErrorAlert(`Error removing task (${err.message})`);\n    }\n  };\n\n  return (\n    <>\n      {/* ACTIONS */}\n\n      <Grid item container xs={12} direction=\"row\" justify=\"flex-end\">\n        <Grid item>\n          <IconButton\n            color=\"primary\"\n            component=\"span\"\n            onClick={handleClickOpen}\n          >\n            <AddIcon />\n          </IconButton>\n        </Grid>\n      </Grid>\n\n      {/* DIALOG */}\n      <Dialog open={open} onClose={handleClose} fullWidth>\n        <DialogTitle style={{ backgroundColor: '#E5E5E5' }}>\n          New Task\n        </DialogTitle>\n        <DialogContent>\n          <TextField\n            autoFocus\n            id=\"description\"\n            label=\"Description\"\n            fullWidth\n            onChange={onChange}\n          />\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={handleClose} color=\"primary\">\n            Cancel\n          </Button>\n          <Button onClick={handleAddTask} color=\"primary\">\n            Add Task\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      {/* LIST */}\n\n      <Grid item xs={12}>\n        <Paper elevation={1}>\n          <List\n            subheader={\n              <ListSubheader\n                color=\"primary\"\n                style={{ backgroundColor: '#E5E5E5' }}\n              >\n                Tasks\n                {!isLoading && tasks.length === 0\n                  ? ' (No items to display)'\n                  : ''}\n                {isLoading ? ' (Loading...)' : ''}\n                {isError ? ' (Error loading tasks)' : ''}\n              </ListSubheader>\n            }\n          >\n            {tasks &&\n              tasks.map((task) => (\n                <ListItem key={task._id}>\n                  <Switch\n                    edge=\"start\"\n                    onChange={handleCompleteTask(task)}\n                    checked={task.completed}\n                  />\n                  <ListItemText primary={task.description} />\n                  <ListItemSecondaryAction>\n                    <IconButton onClick={handleDeleteTask(task)}>\n                      <DeleteIcon />\n                    </IconButton>\n                  </ListItemSecondaryAction>\n                </ListItem>\n              ))}\n          </List>\n        </Paper>\n      </Grid>\n    </>\n  );\n}\n","import { Backdrop, Grid, GridList, GridListTile, GridListTileBar, IconButton, ListSubheader, makeStyles, Paper } from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport VideocamIcon from '@material-ui/icons/Videocam';\nimport React, { useContext, useState } from 'react';\nimport { addVideo, deleteVideo } from '../../api/db';\nimport { SnackBarContext } from '../../context/SnackBarProvider';\nimport { useGetVideosByOrderId } from './hooks';\n\nconst useStyles = makeStyles((theme) => ({\n  inputFile: {\n    display: 'none',\n  },\n  icon: {\n    color: 'rgba(255, 255, 255, 0.54)',\n  },\n  backdrop: {\n    zIndex: theme.zIndex.drawer + 1,\n    color: '#fff',\n  },\n  backdropContent: {\n    maxWidth: '95%',\n    maxHeight: '95%',\n  },\n}));\n\nexport default function VideoList({ orderId }) {\n  const classes = useStyles();\n\n  const { showSuccessAlert, showErrorAlert } = useContext(\n    SnackBarContext,\n  );\n\n  const [videos, isLoading, isError, reload] = useGetVideosByOrderId(\n    orderId,\n    [],\n  );\n  const [open, setOpen] = useState(false);\n  const [selectedVideo, setSelectedVideo] = useState('');\n\n  const handleClose = () => {\n    setSelectedVideo('');\n    setOpen(false);\n  };\n\n  const handleOpenVideo = (video) => () => {\n    // clicked video\n    setSelectedVideo(video);\n    // open backdrop\n    setOpen(!open);\n  };\n\n  const onChangeVideoUpload = async (event) => {\n    try {\n      const element = document.getElementById('input-video-file');\n      if (element.files && element.files[0]) {\n        await addVideo(orderId, element.files[0]);\n        reload();\n        // show message\n        showSuccessAlert('Video uploaded');\n      }\n    } catch (err) {\n      showErrorAlert(`Error uploading video (${err.message})`);\n    }\n  };\n\n  const handleDeleteVideo = (video) => async (event) => {\n    try {\n      // delete\n      await deleteVideo(video);\n      // reload videos\n      reload();\n      // show message\n      showSuccessAlert('Video removed');\n    } catch (err) {\n      showErrorAlert(`Error removing video (${err.message})`);\n    }\n  };\n\n  return (\n    <>\n      {/* BACKDROP */}\n\n      <Backdrop\n        className={classes.backdrop}\n        open={open}\n        onClick={handleClose}\n      >\n        {selectedVideo && (\n          <video controls className={classes.backdropContent}>\n            <source src={selectedVideo} />\n            <p>This browser does not support the video element</p>\n          </video>\n        )}\n      </Backdrop>\n\n      {/* ACTIONS */}\n\n      <Grid item container xs={12} direction=\"row\" justify=\"flex-end\">\n        <Grid item>\n          <input\n            type=\"file\"\n            accept=\"video/*\"\n            id=\"input-video-file\"\n            className={classes.inputFile}\n            onChange={onChangeVideoUpload}\n          />\n          <label htmlFor=\"input-video-file\">\n            <IconButton color=\"primary\" component=\"span\">\n              <VideocamIcon />\n            </IconButton>\n          </label>\n        </Grid>\n      </Grid>\n\n      {/* LIST */}\n\n      <Grid item xs={12}>\n        <Paper elevation={1}>\n          <GridList cellHeight={180} cols={3}>\n            <GridListTile\n              key=\"subheader-video\"\n              cols={3}\n              style={{ height: 'auto' }}\n            >\n              <ListSubheader\n                component=\"div\"\n                color=\"primary\"\n                style={{ backgroundColor: '#E5E5E5' }}\n              >\n                Videos\n                {!isLoading && videos.length === 0\n                  ? ' (No items to display)'\n                  : ''}\n                {isLoading ? ' (Loading...)' : ''}\n                {isError ? ' (Error loading videos)' : ''}\n              </ListSubheader>\n            </GridListTile>\n            {videos &&\n              videos.map((video) => {\n                const videoURL = URL.createObjectURL(\n                  video._attachments.file.data,\n                );\n                return (\n                  <GridListTile\n                    key={video._id}\n                    cols={1}\n                    onClick={handleOpenVideo(videoURL)}\n                  >\n                    <video height={180} controls={false}>\n                      <source\n                        type={video._attachments.file.content_type}\n                        src={videoURL}\n                      />\n                      <p>\n                        This browser does not support the video\n                        element\n                      </p>\n                    </video>\n                    <GridListTileBar\n                      title={video.name}\n                      actionIcon={\n                        <IconButton\n                          className={classes.icon}\n                          onClick={handleDeleteVideo(video)}\n                        >\n                          <DeleteIcon />\n                        </IconButton>\n                      }\n                    />\n                  </GridListTile>\n                );\n              })}\n          </GridList>\n        </Paper>\n      </Grid>\n    </>\n  );\n}\n","import { Grid, Typography } from '@material-ui/core';\nimport React from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useGetOrderById } from './hooks';\nimport ImageList from './ImageList';\nimport TaskList from './TaskList';\nimport VideoList from './VideoList';\n\nexport default function OrderDetail() {\n  let { id } = useParams();\n\n  // states\n  const [order, isLoading, isError] = useGetOrderById(id);\n\n  return (\n    <div>\n      {isError && <div>Something went wrong ...</div>}\n      {isLoading && <div>Loading...</div>}\n      {!isLoading && !order && (\n        <Typography variant=\"subtitle1\">Order not found</Typography>\n      )}\n      {order && (\n        <Grid container spacing={2}>\n          <Grid item xs={12}>\n            <Typography variant=\"h5\">{order.description}</Typography>\n          </Grid>\n          <TaskList orderId={id} />\n          <ImageList orderId={id} />\n          <VideoList orderId={id} />\n        </Grid>\n      )}\n    </div>\n  );\n}\n","import { Grid, IconButton, List, ListItem, ListItemSecondaryAction, ListItemText, Paper, Typography } from '@material-ui/core';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport React from 'react';\nimport { Link, useRouteMatch } from 'react-router-dom';\nimport { useGetOrders } from './hooks';\n\nexport default function OrderList() {\n  const { url } = useRouteMatch();\n  const [orders, isLoading, isError] = useGetOrders([]);\n\n  return (\n    <div>\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <Typography variant=\"h5\">Work Orders</Typography>\n        </Grid>\n        <Grid item xs={12}>\n          {isError && <div>Something went wrong ...</div>}\n          {isLoading && <div>Loading...</div>}\n          {!isLoading && orders.length === 0 && (\n            <Typography variant=\"subtitle1\">\n              No orders to display\n            </Typography>\n          )}\n          {orders.length > 0 && (\n            <Paper elevation={1}>\n              <List>\n                {orders.map((order) => (\n                  <ListItem\n                    key={order._id}\n                    button\n                    component={Link}\n                    to={`${url}/${order._id}`}\n                  >\n                    <ListItemText\n                      primary={order.description}\n                      secondary={order.station}\n                    />\n                    <ListItemSecondaryAction>\n                      <IconButton color=\"inherit\">\n                        <VisibilityIcon />\n                      </IconButton>\n                    </ListItemSecondaryAction>\n                  </ListItem>\n                ))}\n              </List>\n            </Paper>\n          )}\n        </Grid>\n      </Grid>\n    </div>\n  );\n}\n","import React from 'react';\nimport { Route, Switch, useRouteMatch } from 'react-router-dom';\nimport OrderDetail from './OrderDetail';\nimport OrderList from './OrderList';\n\nexport default function OrderRouter() {\n  const { path } = useRouteMatch();\n\n  return (\n    <Switch>\n      <Route exact path={path}>\n        <OrderList />\n      </Route>\n      <Route path={`${path}/:id`}>\n        <OrderDetail />\n      </Route>\n    </Switch>\n  );\n}\n","import Container from '@material-ui/core/Container';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React from 'react';\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom';\nimport Header from './components/header/Header';\nimport Home from './components/home/Home';\nimport OrderIndex from './components/orders/OrderIndex';\nimport { SnackBarProvider } from './context/SnackBarProvider';\n\nconst useStyles = makeStyles((theme) => ({\n  main: {\n    paddingTop: theme.spacing(2),\n    // [theme.breakpoints.down(\"xs\")]: {\n    //   padding: theme.spacing(2),\n    // },\n  },\n}));\n\nexport default function App() {\n  const classes = useStyles();\n\n  return (\n    <Router basename=\"/\">\n      <CssBaseline />\n      <SnackBarProvider>\n        <Header />\n        <Container maxWidth=\"md\">\n          <main className={classes.main}>\n            <Switch>\n              <Route exact path=\"/\">\n                <Home />\n              </Route>\n              <Route path=\"/orders\">\n                <OrderIndex />\n              </Route>\n            </Switch>\n          </main>\n        </Container>\n      </SnackBarProvider>\n    </Router>\n  );\n}\n","import AddToHomeScreen from 'a2hs.js';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n\n// add to home screen\nAddToHomeScreen({\n  brandName: 'My Work',\n});\n","import AppBar from '@material-ui/core/AppBar';\nimport IconButton from '@material-ui/core/IconButton';\nimport { makeStyles } from '@material-ui/core/styles';\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport React, { useState } from 'react';\nimport HeaderDrawer from './HeaderDrawer';\nimport { HeaderWifiIcon } from './HeaderWifiIcon';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\n\nexport default function Header() {\n  const classes = useStyles();\n  const iOS =\n    process.browser && /iPad|iPhone|iPod/.test(navigator.userAgent);\n  const [open, setOpen] = useState(false);\n\n  const toggleDrawer = (value) => (event) => {\n    if (\n      event &&\n      event.type === 'keydown' &&\n      (event.key === 'Tab' || event.key === 'Shift')\n    ) {\n      return;\n    }\n\n    if (open !== value) {\n      setOpen(value);\n    }\n  };\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"static\">\n        <SwipeableDrawer\n          anchor=\"left\"\n          open={open}\n          onOpen={toggleDrawer(true)}\n          onClose={toggleDrawer(false)}\n          disableBackdropTransition={!iOS}\n          disableDiscovery={iOS}\n        >\n          <HeaderDrawer />\n        </SwipeableDrawer>\n        <Toolbar>\n          <IconButton\n            edge=\"start\"\n            className={classes.menuButton}\n            color=\"inherit\"\n            aria-label=\"menu\"\n            onClick={toggleDrawer(true)}\n          >\n            <MenuIcon />\n          </IconButton>\n          <Typography variant=\"h6\" className={classes.title}>\n            My Work App\n          </Typography>\n          <HeaderWifiIcon/>\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n}\n","import { List, ListItem, ListItemIcon, ListItemText, makeStyles } from '@material-ui/core';\nimport AssignmentIcon from '@material-ui/icons/Assignment';\nimport HomeIcon from '@material-ui/icons/Home';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction ListItemLink(props) {\n  const { icon, primary, to } = props;\n\n  const renderLink = React.useMemo(\n    () =>\n      React.forwardRef((itemProps, ref) => (\n        <Link to={to} ref={ref} {...itemProps} />\n      )),\n    [to],\n  );\n\n  return (\n    <li>\n      <ListItem button component={renderLink}>\n        {icon ? <ListItemIcon>{icon}</ListItemIcon> : null}\n        <ListItemText primary={primary} />\n      </ListItem>\n    </li>\n  );\n}\n\nListItemLink.propTypes = {\n  icon: PropTypes.element,\n  primary: PropTypes.string.isRequired,\n  to: PropTypes.string.isRequired,\n};\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    width: 180,\n  },\n}));\n\nexport default function HeaderDrawer() {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <List>\n        <ListItemLink to=\"/\" primary=\"Home\" icon={<HomeIcon />} />\n        <ListItemLink\n          to=\"/orders\"\n          primary=\"Orders\"\n          icon={<AssignmentIcon />}\n        />\n      </List>\n    </div>\n  );\n}\n"],"sourceRoot":""}