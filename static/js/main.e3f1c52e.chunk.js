(this["webpackJsonptest-01"]=this["webpackJsonptest-01"]||[]).push([[0],{117:function(e,t,n){e.exports=n(141)},122:function(e,t,n){},141:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),o=n.n(c),s=(n(122),n(199)),u=n(200),i=n(106),l=n(35),p=n(40),d=n(89),f=n(9),m=n(53),b=n(187),h=n(5),v=n.n(h),E=n(8),g=n(31),x=n(42),y=n(105),O=n(59),j=n(74);function w(e,t,n,a){var r=e+t/60+n/3600;return"S"!==a&&"W"!==a||(r*=-1),r}var k=function(e){return new Promise((function(t,n){j.getData(e,(function(){var e=j.getAllTags(this);console.log("==>> EXIF ALL",e),t(function(e){var t=e.GPSLatitude,n=e.GPSLatitudeRef,a=e.GPSLongitude,r=e.GPSLongitudeRef;if(!t||!n||!a||!r)return null;var c=t[0],o=t[1],s=t[2],u=n,i=a[0],l=a[1],p=a[2],d=r;return{lat:w(c,o,s,u),lng:w(i,l,p,d),origin:"EXIF"}}(e))}))}))},S=function(){return new Promise((function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){console.log(t),e({lat:t.coords.latitude,lng:t.coords.longitude,origin:"DEVICE"})}),(function(e){t(e)}),{timeout:5e3}):(console.log("Geolocation is not supported for this Browser/OS."),t())}))};O.characters("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$@"),x.a.plugin(y.a),x.a.on("destroyed",(function(e){console.log("==>> POUCHEDB destroyed",e)}));var I,C,D,_,N,A={_id:"default",downloadDisabled:!1,downloadedAt:"",uploadDisabled:!0,uploadedAt:"",deleteDisabled:!0,deletedAt:""};function L(){return I||(I=new x.a("sync-metadata")),I}function P(){return C||(C=new x.a("orders")).createIndex({index:{fields:["createdAt"]}}),C}function F(){return N||(N=new x.a("tasks")).createIndex({index:{fields:["createdAt","orderId"]}}),N}function W(){return D||(D=new x.a("images")).createIndex({index:{fields:["createdAt","orderId"]}}),D}function T(){return _||(_=new x.a("videos")).createIndex({index:{fields:["createdAt","orderId"]}}),_}function R(){return B.apply(this,arguments)}function B(){return(B=Object(E.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L().get("default");case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!e.t0||"not_found"!==e.t0.name){e.next=10;break}return e.abrupt("return",A);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function G(e){return H.apply(this,arguments)}function H(){return(H=Object(E.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:return n=e.sent,a=n&&n._rev?Object(g.a)({},t,{_rev:n._rev}):t,e.next=6,L().put(a);case 6:return e.next=8,L().get("default");case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return z.apply(this,arguments)}function z(){return(z=Object(E.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P().destroy();case 2:return(t=e.sent).ok&&(C=null),e.next=6,F().destroy();case 6:return(t=e.sent).ok&&(N=null),e.next=10,W().destroy();case 10:return(t=e.sent).ok&&(D=null),e.next=14,T().destroy();case 14:return(t=e.sent).ok&&(_=null),e.abrupt("return",t);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return M.apply(this,arguments)}function M(){return(M=Object(E.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P().find({selector:{createdAt:{$gte:null}},sort:["createdAt"]});case 2:return t=e.sent,e.abrupt("return",t.docs);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return V.apply(this,arguments)}function V(){return(V=Object(E.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P().get(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return q.apply(this,arguments)}function q(){return(q=Object(E.a)(v.a.mark((function e(t){var n,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.id&&(n=Object(g.a)({},t,{_id:t.id})),e.next=3,P().put(n);case 3:return a=e.sent,e.abrupt("return",J(a.id));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(E.a)(v.a.mark((function e(t){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W().find({selector:{orderId:t,createdAt:{$gte:null}},sort:["createdAt"]});case 2:return n=e.sent,a=n.docs.map((function(e){return e._id})),e.next=6,W().allDocs({keys:a,include_docs:!0,attachments:!0,binary:!0});case 6:return r=e.sent,e.abrupt("return",r.rows.map((function(e){return e.doc})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(E.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W().get(t,{attachments:!0,binary:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=Object(E.a)(v.a.mark((function e(t,n){var a,r,c,o,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.name,r=n.type,e.prev=1,e.next=4,k(n);case 4:if(c=e.sent){e.next=9;break}return e.next=8,S();case 8:c=e.sent;case 9:return o={_id:O.generate(),orderId:t,name:a,location:c,createdAt:(new Date).toISOString(),_attachments:{file:{content_type:r,data:n}}},e.next=12,W().put(o);case 12:return s=e.sent,e.abrupt("return",Y(s.id));case 16:e.prev=16,e.t0=e.catch(1),console.error(e.t0);case 19:case"end":return e.stop()}}),e,null,[[1,16]])})))).apply(this,arguments)}function ne(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(E.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W().get(t._id);case 2:return n=e.sent,e.abrupt("return",W().remove(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return ce.apply(this,arguments)}function ce(){return(ce=Object(E.a)(v.a.mark((function e(t){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T().find({selector:{orderId:t,createdAt:{$gte:null}},sort:["createdAt"]});case 2:return n=e.sent,a=n.docs.map((function(e){return e._id})),e.next=6,T().allDocs({keys:a,include_docs:!0,attachments:!0,binary:!0});case 6:return r=e.sent,e.abrupt("return",r.rows.map((function(e){return e.doc})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){return se.apply(this,arguments)}function se(){return(se=Object(E.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T().get(t,{attachments:!0,binary:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e,t){return ie.apply(this,arguments)}function ie(){return(ie=Object(E.a)(v.a.mark((function e(t,n){var a,r,c,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.name,r=n.type,e.prev=1,c={_id:O.generate(),orderId:t,name:a,createdAt:(new Date).toISOString(),_attachments:{file:{content_type:r,data:n}}},e.next=5,T().put(c);case 5:return o=e.sent,e.abrupt("return",oe(o.id));case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function le(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(E.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T().get(t._id);case 2:return n=e.sent,e.abrupt("return",T().remove(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(E.a)(v.a.mark((function e(t){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F().find({selector:{orderId:t,createdAt:{$gte:null}},sort:["createdAt"]});case 2:return n=e.sent,a=n.docs.map((function(e){return e._id})),e.next=6,F().allDocs({keys:a,include_docs:!0});case 6:return r=e.sent,e.abrupt("return",r.rows.map((function(e){return e.doc})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e){return be.apply(this,arguments)}function be(){return(be=Object(E.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F().get(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(E.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F().put(Object(g.a)({},t,{_id:O.generate(),createdAt:(new Date).toISOString(),completed:!1}));case 3:return n=e.sent,e.abrupt("return",me(n.id));case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Ee(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(E.a)(v.a.mark((function e(t){var n,a,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me(t._id);case 3:return n=e.sent,a=n._rev,e.next=7,F().put(Object(g.a)({},t,{_rev:a}));case 7:return r=e.sent,e.abrupt("return",me(r.id));case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function xe(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(E.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F().get(t._id);case 2:return n=e.sent,e.abrupt("return",F().remove(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Oe=n(147),je=n(149),we=n(107),ke=n(188),Se=n(189),Ie=n(190),Ce=n(191),De=n(98),_e=n.n(De),Ne=n(37),Ae=n.n(Ne),Le=Object(i.a)((function(e){return{inputFile:{display:"none"},icon:{color:"rgba(255, 255, 255, 0.54)"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},backdropContent:{maxWidth:"95%",maxHeight:"95%"}}}));function Pe(e){var t=e.orderId,n=Le(),c=function(e,t){var n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],o=r[1],s=Object(a.useState)(!1),u=Object(f.a)(s,2),i=u[0],l=u[1],p=Object(a.useState)(t),d=Object(f.a)(p,2),m=d[0],b=d[1],h=Object(a.useState)(0),g=Object(f.a)(h,2),x=g[0],y=g[1];return Object(a.useEffect)((function(){function t(){return(t=Object(E.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),o(!1),t.prev=2,t.t0=b,t.next=6,K(e);case 6:t.t1=t.sent,(0,t.t0)(t.t1),t.next=14;break;case 10:t.prev=10,t.t2=t.catch(2),console.error(t.t2),o(!0);case 14:l(!1);case 15:case"end":return t.stop()}}),t,null,[[2,10]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e,x]),[m,i,c,function(){y(Date.now().valueOf())}]}(t,[]),o=Object(f.a)(c,4),s=o[0],u=o[1],i=o[2],l=o[3],p=Object(a.useState)(!1),d=Object(f.a)(p,2),m=d[0],h=d[1],g=Object(a.useState)(!1),x=Object(f.a)(g,2),y=x[0],O=x[1],j=function(e){return function(){O(e),h(!m)}},w=function(){var e=Object(E.a)(v.a.mark((function e(n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=document.getElementById("input-image-file")).files||!a.files[0]){e.next=5;break}return e.next=4,ee(t,a.files[0]);case 4:l();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){return function(){var t=Object(E.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ne(e);case 2:l();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{className:n.backdrop,open:m,onClick:function(){h(!1)}},y&&r.a.createElement("img",{className:n.backdropContent,src:y,alt:""})),r.a.createElement(b.a,{item:!0,container:!0,xs:12,direction:"row",justify:"flex-end"},r.a.createElement(b.a,{item:!0},r.a.createElement("input",{type:"file",accept:"image/*",id:"input-image-file",className:n.inputFile,onChange:w}),r.a.createElement("label",{htmlFor:"input-image-file"},r.a.createElement(je.a,{color:"primary",component:"span"},r.a.createElement(_e.a,null))))),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(we.a,{elevation:1},r.a.createElement(ke.a,{cellHeight:180,cols:3},r.a.createElement(Se.a,{key:"subheader-image",cols:3,style:{height:"auto"}},r.a.createElement(Ie.a,{component:"div",color:"primary",style:{backgroundColor:"#E5E5E5"}},"Images",u||0!==s.length?"":" (No items to display)",u?" (Loading...)":"",i?" (Error loading images)":"")),s&&s.map((function(e){var t=URL.createObjectURL(e._attachments.file.data);return r.a.createElement(Se.a,{key:e._id,cols:1,onClick:j(t)},r.a.createElement("img",{src:t,alt:e.name}),r.a.createElement(Ce.a,{title:e.name,subtitle:e.location?"".concat(e.location.lat,", ").concat(e.location.lng):"No location",actionIcon:r.a.createElement(je.a,{className:n.icon,onClick:k(e)},r.a.createElement(Ae.a,null))}))}))))))}var Fe=n(99),We=n.n(Fe),Te=Object(i.a)((function(e){return{inputFile:{display:"none"},icon:{color:"rgba(255, 255, 255, 0.54)"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},backdropContent:{maxWidth:"95%",maxHeight:"95%"}}}));function Re(e){var t=e.orderId,n=Te(),c=function(e,t){var n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],o=r[1],s=Object(a.useState)(!1),u=Object(f.a)(s,2),i=u[0],l=u[1],p=Object(a.useState)(t),d=Object(f.a)(p,2),m=d[0],b=d[1],h=Object(a.useState)(0),g=Object(f.a)(h,2),x=g[0],y=g[1];return Object(a.useEffect)((function(){function t(){return(t=Object(E.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),o(!1),t.prev=2,t.t0=b,t.next=6,re(e);case 6:t.t1=t.sent,(0,t.t0)(t.t1),t.next=14;break;case 10:t.prev=10,t.t2=t.catch(2),console.error(t.t2),o(!0);case 14:l(!1);case 15:case"end":return t.stop()}}),t,null,[[2,10]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e,x]),[m,i,c,function(){y(Date.now().valueOf())}]}(t,[]),o=Object(f.a)(c,4),s=o[0],u=o[1],i=o[2],l=o[3],p=Object(a.useState)(!1),d=Object(f.a)(p,2),m=d[0],h=d[1],g=Object(a.useState)(""),x=Object(f.a)(g,2),y=x[0],O=x[1],j=function(e){return function(){O(e),h(!m)}},w=function(){var e=Object(E.a)(v.a.mark((function e(n){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=document.getElementById("input-video-file")).files||!a.files[0]){e.next=5;break}return e.next=4,ue(t,a.files[0]);case 4:l();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){return function(){var t=Object(E.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,le(e);case 2:l();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe.a,{className:n.backdrop,open:m,onClick:function(){O(""),h(!1)}},y&&r.a.createElement("video",{controls:!0,className:n.backdropContent},r.a.createElement("source",{src:y}),r.a.createElement("p",null,"This browser does not support the video element"))),r.a.createElement(b.a,{item:!0,container:!0,xs:12,direction:"row",justify:"flex-end"},r.a.createElement(b.a,{item:!0},r.a.createElement("input",{type:"file",accept:"video/*",id:"input-video-file",className:n.inputFile,onChange:w}),r.a.createElement("label",{htmlFor:"input-video-file"},r.a.createElement(je.a,{color:"primary",component:"span"},r.a.createElement(We.a,null))))),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(we.a,{elevation:1},r.a.createElement(ke.a,{cellHeight:180,cols:3},r.a.createElement(Se.a,{key:"subheader-video",cols:3,style:{height:"auto"}},r.a.createElement(Ie.a,{component:"div",color:"primary",style:{backgroundColor:"#E5E5E5"}},"Videos",u||0!==s.length?"":" (No items to display)",u?" (Loading...)":"",i?" (Error loading videos)":"")),s&&s.map((function(e){var t=URL.createObjectURL(e._attachments.file.data);return r.a.createElement(Se.a,{key:e._id,cols:1,onClick:j(t)},r.a.createElement("video",{height:180,controls:!1},r.a.createElement("source",{type:e._attachments.file.content_type,src:t}),r.a.createElement("p",null,"This browser does not support the video element")),r.a.createElement(Ce.a,{title:e.name,actionIcon:r.a.createElement(je.a,{className:n.icon,onClick:k(e)},r.a.createElement(Ae.a,null))}))}))))))}var Be=n(192),Ge=n(193),He=n(194),Ue=n(201),ze=n(195),$e=n(196),Me=n(145),Je=n(142),Ve=n(202),Xe=n(144),qe=n(197),Ke=n(100),Qe=n.n(Ke);function Ye(e){var t=e.orderId,n=function(e,t){var n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],o=r[1],s=Object(a.useState)(!1),u=Object(f.a)(s,2),i=u[0],l=u[1],p=Object(a.useState)(t),d=Object(f.a)(p,2),m=d[0],b=d[1],h=Object(a.useState)(0),g=Object(f.a)(h,2),x=g[0],y=g[1];return Object(a.useEffect)((function(){function t(){return(t=Object(E.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),o(!1),t.prev=2,t.t0=b,t.next=6,de(e);case 6:t.t1=t.sent,(0,t.t0)(t.t1),t.next=14;break;case 10:t.prev=10,t.t2=t.catch(2),console.error(t.t2),o(!0);case 14:l(!1);case 15:case"end":return t.stop()}}),t,null,[[2,10]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e,x]),[m,i,c,function(){y(Date.now().valueOf())}]}(t,[]),c=Object(f.a)(n,4),o=c[0],s=c[1],u=c[2],i=c[3],l=Object(a.useState)(!1),p=Object(f.a)(l,2),d=p[0],m=p[1],h=Object(a.useState)(!1),x=Object(f.a)(h,2),y=x[0],O=x[1],j=function(){m(!1)},w=function(){var e=Object(E.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he({orderId:t,description:y});case 2:j(),i();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e){return function(){var t=Object(E.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ee(Object(g.a)({},e,{completed:n.target.checked}));case 2:i();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(E.a)(v.a.mark((function t(n){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xe(e);case 2:i();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{item:!0,container:!0,xs:12,direction:"row",justify:"flex-end"},r.a.createElement(b.a,{item:!0},r.a.createElement(je.a,{color:"primary",component:"span",onClick:function(){m(!0)}},r.a.createElement(Qe.a,null)))),r.a.createElement(Be.a,{open:d,onClose:j,fullWidth:!0},r.a.createElement(Ge.a,{style:{backgroundColor:"#E5E5E5"}},"New Task"),r.a.createElement(He.a,null,r.a.createElement(Ue.a,{autoFocus:!0,id:"description",label:"Description",fullWidth:!0,onChange:function(e){O(e.target.value)}})),r.a.createElement(ze.a,null,r.a.createElement($e.a,{onClick:j,color:"primary"},"Cancel"),r.a.createElement($e.a,{onClick:w,color:"primary"},"Add Task"))),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(we.a,{elevation:1},r.a.createElement(Me.a,{subheader:r.a.createElement(Ie.a,{color:"primary",style:{backgroundColor:"#E5E5E5"}},"Tasks",s||0!==o.length?"":" (No items to display)",s?" (Loading...)":"",u?" (Error loading tasks)":"")},o&&o.map((function(e){return r.a.createElement(Je.a,{key:e._id},r.a.createElement(Ve.a,{edge:"start",onChange:k(e),checked:e.completed}),r.a.createElement(Xe.a,{primary:e.description}),r.a.createElement(qe.a,null,r.a.createElement(je.a,{onClick:S(e)},r.a.createElement(Ae.a,null))))}))))))}function Ze(){var e=Object(p.f)().id,t=function(e,t){var n=Object(a.useState)(!1),r=Object(f.a)(n,2),c=r[0],o=r[1],s=Object(a.useState)(!1),u=Object(f.a)(s,2),i=u[0],l=u[1],p=Object(a.useState)(t),d=Object(f.a)(p,2),m=d[0],b=d[1],h=Object(a.useState)(0),g=Object(f.a)(h,2),x=g[0],y=g[1];return Object(a.useEffect)((function(){function t(){return(t=Object(E.a)(v.a.mark((function t(){return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),o(!1),t.prev=2,t.t0=b,t.next=6,J(e);case 6:t.t1=t.sent,(0,t.t0)(t.t1),t.next=14;break;case 10:t.prev=10,t.t2=t.catch(2),console.error(t.t2),o(!0);case 14:l(!1);case 15:case"end":return t.stop()}}),t,null,[[2,10]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e,x]),[m,i,c,function(){y(Date.now().valueOf())}]}(e),n=Object(f.a)(t,3),c=n[0],o=n[1],s=n[2];return r.a.createElement("div",null,s&&r.a.createElement("div",null,"Something went wrong ..."),o&&r.a.createElement("div",null,"Loading..."),!o&&!c&&r.a.createElement(m.a,{variant:"subtitle1"},"Order not found"),c&&r.a.createElement(b.a,{container:!0,spacing:2},r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(m.a,{variant:"h5"},c.description)),r.a.createElement(Ye,{orderId:e}),r.a.createElement(Pe,{orderId:e}),r.a.createElement(Re,{orderId:e})))}var et=n(101),tt=n.n(et);function nt(){var e=Object(p.g)().url,t=function(e){var t=Object(a.useState)(!1),n=Object(f.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(!1),s=Object(f.a)(o,2),u=s[0],i=s[1],l=Object(a.useState)(e),p=Object(f.a)(l,2),d=p[0],m=p[1],b=Object(a.useState)(0),h=Object(f.a)(b,2),g=h[0],x=h[1];return Object(a.useEffect)((function(){function e(){return(e=Object(E.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),c(!1),e.prev=2,e.t0=m,e.next=6,$();case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(2),console.error(e.t2),c(!0);case 14:i(!1);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[g]),[d,u,r,function(){x(Date.now().valueOf())}]}([]),n=Object(f.a)(t,3),c=n[0],o=n[1],s=n[2];return r.a.createElement("div",null,r.a.createElement(b.a,{container:!0,spacing:2},r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(m.a,{variant:"h5"},"Work Orders")),r.a.createElement(b.a,{item:!0,xs:12},s&&r.a.createElement("div",null,"Something went wrong ..."),o&&r.a.createElement("div",null,"Loading..."),!o&&0===c.length&&r.a.createElement(m.a,{variant:"subtitle1"},"No orders to display"),c.length>0&&r.a.createElement(we.a,{elevation:1},r.a.createElement(Me.a,null,c.map((function(t){return r.a.createElement(Je.a,{key:t._id,button:!0,component:l.b,to:"".concat(e,"/").concat(t._id)},r.a.createElement(Xe.a,{primary:t.description,secondary:t.station}),r.a.createElement(qe.a,null,r.a.createElement(je.a,{color:"inherit"},r.a.createElement(tt.a,null))))})))))))}function at(){var e=Object(p.g)().path;return r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:e},r.a.createElement(nt,null)),r.a.createElement(p.a,{path:"".concat(e,"/:id")},r.a.createElement(Ze,null)))}var rt=n(198),ct=n(103),ot=n.n(ct),st=n(102),ut=n.n(st);function it(){return lt.apply(this,arguments)}function lt(){return(lt=Object(E.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://tp-poc-api.herokuapp.com/api/orders");case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(e){return dt.apply(this,arguments)}function dt(){return(dt=Object(E.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://tp-poc-api.herokuapp.com/api/tasks/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ft=Object(i.a)((function(e){return{root:{},button:{marginRight:e.spacing(2)}}}));function mt(){var e=ft(),t=Object(a.useState)(A),n=Object(f.a)(t,2),c=n[0],o=n[1];Object(a.useEffect)((function(){function e(){return(e=Object(E.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R();case 3:t=e.sent,o(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var s=Object(a.useState)({loading:!1,message:"",err:!1}),u=Object(f.a)(s,2),i=u[0],l=u[1],p=function(){var e=Object(E.a)(v.a.mark((function e(t){var n,a,r,s,u;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l({loading:!0,message:"Loading work orders from server"}),e.prev=1,e.next=4,it();case 4:if(!((n=e.sent).length>0)){e.next=26;break}return l({message:"Loading tasks for ".concat(n.length," work orders from server")}),l({message:"Saving work orders to local database"}),e.next=10,Promise.all(n.map((function(e){return X(e)})));case 10:return a=e.sent,l({message:"Saving work orders' tasks to local database"}),r=a.map((function(e){return e.id})),e.next=15,Promise.all(r.map((function(e){return pt(e)})));case 15:return s=e.sent,e.next=18,Promise.all(s.flat().map((function(e){return he(e)})));case 18:return l({message:"Finishing to save to local database"}),e.next=21,G(Object(g.a)({},c,{downloadDisabled:!0,uploadDisabled:!1,deleteDisabled:!1}));case 21:u=e.sent,o(u),l({loading:!1,message:"Loaded ".concat(a.length," work orders successfuly")}),e.next=27;break;case 26:l({loading:!1,message:"There are no work orders to load from server"});case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(1),console.error(e.t0),l({loading:!1,error:!0,message:"Error loading work orders from server. Please try again"});case 33:case"end":return e.stop()}}),e,null,[[1,29]])})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(E.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l({loading:!0,message:"Syncing work orders back to server"}),l({message:"Finishing sync back to server"}),e.next=5,G(Object(g.a)({},c,{downloadDisabled:!0,uploadDisabled:!0,deleteDisabled:!1}));case 5:n=e.sent,o(n),l({loading:!1,message:"Work orders synced back to server successfuly"}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),l({loading:!1,error:!0,message:"Error syncing work orders back to server. Please try again"});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(E.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l({loading:!0,message:"Cleaning local database"}),e.next=4,U();case 4:return l({message:"Finishing the cleaning of the local database"}),e.next=7,G(Object(g.a)({},c,{downloadDisabled:!1,uploadDisabled:!0,deleteDisabled:!0}));case 7:n=e.sent,o(n),l({loading:!1,message:"Local database cleaned successfuly"}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),l({loading:!1,error:!0,message:"Error cleaning the local database. Please try again"});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:e.root},r.a.createElement(b.a,{container:!0,spacing:2},r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement(m.a,{variant:"h5"},"Home")),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement($e.a,{variant:"contained",color:"default",className:e.button,startIcon:r.a.createElement(ut.a,null),onClick:p,disabled:c.downloadDisabled},"Download")),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement($e.a,{variant:"contained",color:"default",className:e.button,startIcon:r.a.createElement(ot.a,null),onClick:d,disabled:c.uploadDisabled},"Upload (Not Working)")),r.a.createElement(b.a,{item:!0,xs:12},r.a.createElement($e.a,{variant:"contained",color:"default",className:e.button,startIcon:r.a.createElement(Ae.a,null),onClick:h,disabled:c.deleteDisabled},"Delete")),r.a.createElement(b.a,{item:!0,xs:12},i.loading&&r.a.createElement(rt.a,{size:17}),"  ",i.message&&r.a.createElement("span",null,i.message))))}var bt=Object(i.a)((function(e){return{main:{paddingTop:e.spacing(2)}}}));function ht(){var e=bt();return r.a.createElement(l.a,{basename:"/"},r.a.createElement(s.a,null),r.a.createElement(d.a,null),r.a.createElement(u.a,{maxWidth:"md"},r.a.createElement("main",{className:e.main},r.a.createElement(p.c,null,r.a.createElement(p.a,{exact:!0,path:"/"},r.a.createElement(mt,null)),r.a.createElement(p.a,{path:"/orders"},r.a.createElement(at,null))))))}var vt=n(104),Et=n.n(vt);o.a.render(r.a.createElement(ht,null),document.getElementById("root")),Et()({brandName:"My Work"})},89:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var a=n(9),r=n(0),c=n.n(r),o=n(106),s=n(146),u=n(148),i=n(53),l=n(149),p=n(97),d=n.n(p),f=n(152),m=n(90),b=Object(o.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function h(){var t=b(),n=e.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent),o=Object(r.useState)(!1),p=Object(a.a)(o,2),h=p[0],v=p[1],E=function(e){return function(t){(!t||"keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&h!==e&&v(e)}};return c.a.createElement("div",{className:t.root},c.a.createElement(s.a,{position:"static"},c.a.createElement(f.a,{anchor:"left",open:h,onOpen:E(!0),onClose:E(!1),disableBackdropTransition:!n,disableDiscovery:n},c.a.createElement(m.a,null)),c.a.createElement(u.a,null,c.a.createElement(l.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",onClick:E(!0)},c.a.createElement(d.a,null)),c.a.createElement(i.a,{variant:"h6",className:t.title},"My Work App"))))}}).call(this,n(82))},90:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var a=n(0),r=n.n(a),c=n(142),o=n(143),s=n(144),u=n(106),i=n(145),l=n(95),p=n.n(l),d=n(96),f=n.n(d),m=n(35);function b(e){var t=e.icon,n=e.primary,a=e.to,u=r.a.useMemo((function(){return r.a.forwardRef((function(e,t){return r.a.createElement(m.b,Object.assign({to:a,ref:t},e))}))}),[a]);return r.a.createElement("li",null,r.a.createElement(c.a,{button:!0,component:u},t?r.a.createElement(o.a,null,t):null,r.a.createElement(s.a,{primary:n})))}var h=Object(u.a)((function(e){return{root:{flexGrow:1,width:180}}}));function v(){var e=h();return r.a.createElement("div",{className:e.root},r.a.createElement(i.a,null,r.a.createElement(b,{to:"/",primary:"Home",icon:r.a.createElement(p.a,null)}),r.a.createElement(b,{to:"/orders",primary:"Orders",icon:r.a.createElement(f.a,null)})))}}},[[117,1,2]]]);
//# sourceMappingURL=main.e3f1c52e.chunk.js.map