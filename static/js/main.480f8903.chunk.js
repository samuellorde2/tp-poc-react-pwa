(this["webpackJsonptp-poc-reat-pwa"]=this["webpackJsonptp-poc-reat-pwa"]||[]).push([[0],{101:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(9),a=n(102),c=n.n(a),o=n(103),u=n.n(o),s=n(0),i=n.n(s),l=function(){var e=Object(s.useState)(),t=Object(r.a)(e,2),n=t[0],a=t[1];Object(s.useEffect)((function(){window.addEventListener("online",o),window.addEventListener("offline",o),o()}),[]);var o=function(){navigator.onLine?fetch("".concat("https://tp-poc-api.herokuapp.com/api","/orders"),{method:"HEAD",mode:"no-cors"}).then((function(e){a(!(!e||!e.ok&&"opaque"!==e.type))})).catch((function(e){a(!1)})):a(!1)};return n?i.a.createElement(c.a,null):i.a.createElement(u.a,null)}},124:function(e,t,n){e.exports=n(148)},147:function(e,t,n){},148:function(e,t,n){"use strict";n.r(t);var r=n(92),a=n.n(r),c=n(0),o=n.n(c),u=n(12),s=n.n(u),i=n(209),l=n(208),p=n(113),f=n(37),d=n(42),m=n(93),b=n(32),v=n(4),h=n.n(v),x=n(7),E=n(9),O=n(196),w=n(54),y=n(197),j=n(198),g=n(106),k=n.n(g),S=n(107),C=n.n(S),I=n(39),A=n.n(I),_=n(36),D=n(112),N=n(61),L=n(76);function P(e,t,n,r){var a=e+t/60+n/3600;return"S"!==r&&"W"!==r||(a*=-1),a}var F=function(e){return new Promise((function(t,n){L.getData(e,(function(){var e=L.getAllTags(this);console.log("==>> EXIF ALL",e),t(function(e){var t=e.GPSLatitude,n=e.GPSLatitudeRef,r=e.GPSLongitude,a=e.GPSLongitudeRef;if(!t||!n||!r||!a)return null;var c=t[0],o=t[1],u=t[2],s=n,i=r[0],l=r[1],p=r[2],f=a;return{lat:P(c,o,u,s),lng:P(i,l,p,f),origin:"EXIF"}}(e))}))}))},T=function(){return new Promise((function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){console.log(t),e({lat:t.coords.latitude,lng:t.coords.longitude,origin:"DEVICE"})}),(function(t){e(null)}),{timeout:1e4}):(console.log("Geolocation is not supported for this Browser/OS."),t())}))};N.characters("0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$@"),_.a.plugin(D.a),_.a.on("destroyed",(function(e){console.log("==>> POUCHEDB destroyed",e)}));var R,W,H,B,G,z={_id:"default",downloadDisabled:!1,downloadedAt:"",uploadDisabled:!0,uploadedAt:"",deleteDisabled:!0,deletedAt:""};function U(){return M.apply(this,arguments)}function M(){return(M=Object(x.a)(h.a.mark((function e(){var t,n=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],R&&!t||(R=new _.a("sync-metadata")),e.abrupt("return",R);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return $.apply(this,arguments)}function $(){return($=Object(x.a)(h.a.mark((function e(){var t,n=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],W&&!t){e.next=5;break}return W=new _.a("orders"),e.next=5,W.createIndex({index:{fields:["createdAt"]}});case 5:return e.abrupt("return",W);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return X.apply(this,arguments)}function X(){return(X=Object(x.a)(h.a.mark((function e(){var t,n=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],G&&!t){e.next=5;break}return G=new _.a("tasks"),e.next=5,G.createIndex({index:{fields:["createdAt","orderId"]}});case 5:return e.abrupt("return",G);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return q.apply(this,arguments)}function q(){return(q=Object(x.a)(h.a.mark((function e(){var t,n=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],H&&!t){e.next=5;break}return H=new _.a("images"),e.next=5,H.createIndex({index:{fields:["createdAt","orderId"]}});case 5:return e.abrupt("return",H);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return Q.apply(this,arguments)}function Q(){return(Q=Object(x.a)(h.a.mark((function e(){var t,n=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],B&&!t){e.next=5;break}return B=new _.a("videos"),e.next=5,B.createIndex({index:{fields:["createdAt","orderId"]}});case 5:return e.abrupt("return",B);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return ee.apply(this,arguments)}function ee(){return(ee=Object(x.a)(h.a.mark((function e(){var t,n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(U);case 2:return t=e.sent,e.next=5,te(V);case 5:return n=e.sent,e.next=8,te(J);case 8:return r=e.sent,e.next=11,te(Y);case 11:return a=e.sent,e.next=14,te(K);case 14:return c=e.sent,e.abrupt("return",{metadata:t.ok,orders:n.ok,tasks:r.ok,images:a.ok,video:c.ok});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(x.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return n=e.sent,e.next=5,n.destroy();case 5:if(!(r=e.sent).ok){e.next=9;break}return e.next=9,t(!0);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re=function(){var e=Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae("tasks",J);case 2:return e.next=4,ae("images",Y);case 4:return e.next=6,ae("videos",K);case 6:return e.abrupt("return",Promise.resolve());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(x.a)(h.a.mark((function e(t,n){var r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new _.a("".concat("https://tp-poc-pouchdb-server.herokuapp.com","/").concat(t)),e.t0=console,e.next=4,r.info();case 4:return e.t1=e.sent,e.t0.log.call(e.t0,e.t1),e.next=8,n();case 8:return a=e.sent,e.abrupt("return",new Promise((function(e,n){a.replicate.to(r).on("complete",(function(){console.log(t,"SYNC COMPLETED"),e()})).on("error",(function(e){console.log(t,"SYNC ERROR"),console.error(e),n(e)}))})));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function ce(){return oe.apply(this,arguments)}function oe(){return(oe=Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U();case 3:return t=e.sent,e.next=6,t.get("default");case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(0),!e.t0||"not_found"!==e.t0.name){e.next=13;break}return e.abrupt("return",z);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function ue(e){return se.apply(this,arguments)}function se(){return(se=Object(x.a)(h.a.mark((function e(t){var n,r,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:return n=e.sent,e.next=5,ce();case 5:return r=e.sent,a=r&&r._rev?Object(b.a)({},t,{_rev:r._rev}):t,e.next=9,n.put(a);case 9:return e.next=11,n.get("default");case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return le.apply(this,arguments)}function le(){return(le=Object(x.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return t=e.sent,e.next=5,t.find({selector:{createdAt:{$gte:null}},sort:["createdAt"]});case 5:return n=e.sent,e.abrupt("return",n.docs);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pe(e){return fe.apply(this,arguments)}function fe(){return(fe=Object(x.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return n=e.sent,e.next=5,n.get(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e){return me.apply(this,arguments)}function me(){return(me=Object(x.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:return n=e.sent,e.next=5,n.put(t);case 5:return r=e.sent,e.abrupt("return",pe(r.id));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(x.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:return n=e.sent,e.next=5,n.find({selector:{orderId:t,createdAt:{$gte:null}},sort:["createdAt"]});case 5:return r=e.sent,a=r.docs.map((function(e){return e._id})),e.next=9,n.allDocs({keys:a,include_docs:!0});case 9:return c=e.sent,e.abrupt("return",c.rows.map((function(e){return e.doc})));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){return xe.apply(this,arguments)}function xe(){return(xe=Object(x.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:return n=e.sent,e.next=5,n.get(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(x.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:return n=e.sent,e.next=5,n.put(Object(b.a)({},t,{_id:N.generate(),createdAt:(new Date).toISOString(),completed:!1}));case 5:return r=e.sent,e.abrupt("return",he(r.id));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(x.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:return n=e.sent,e.next=5,he(t._id);case 5:return r=e.sent,a=r._rev,e.next=9,n.put(Object(b.a)({},t,{_rev:a}));case 9:return c=e.sent,e.abrupt("return",he(c.id));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(x.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:return n=e.sent,e.next=5,n.get(t._id);case 5:return r=e.sent,e.abrupt("return",n.remove(r));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return Se.apply(this,arguments)}function Se(){return(Se=Object(x.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:return n=e.sent,e.next=5,n.find({selector:{orderId:t,createdAt:{$gte:null}},sort:["createdAt"]});case 5:return r=e.sent,a=r.docs.map((function(e){return e._id})),e.next=9,n.allDocs({keys:a,include_docs:!0,attachments:!0,binary:!0});case 9:return c=e.sent,e.abrupt("return",c.rows.map((function(e){return e.doc})));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(x.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:return n=e.sent,e.next=5,n.get(t,{attachments:!0,binary:!0});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,t){return _e.apply(this,arguments)}function _e(){return(_e=Object(x.a)(h.a.mark((function e(t,n){var r,a,c,o,u,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:return r=e.sent,a=n.name,c=n.type,e.next=6,F(n);case 6:if(o=e.sent){e.next=11;break}return e.next=10,T();case 10:o=e.sent;case 11:return u={_id:N.generate(),orderId:t,name:a,location:o,createdAt:(new Date).toISOString(),_attachments:{file:{content_type:c,data:n}}},e.next=14,r.put(u);case 14:return s=e.sent,e.abrupt("return",Ce(s.id));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(x.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:return n=e.sent,e.next=5,n.get(t._id);case 5:return r=e.sent,e.abrupt("return",n.remove(r));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(x.a)(h.a.mark((function e(t){var n,r,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:return n=e.sent,e.next=5,n.find({selector:{orderId:t,createdAt:{$gte:null}},sort:["createdAt"]});case 5:return r=e.sent,a=r.docs.map((function(e){return e._id})),e.next=9,n.allDocs({keys:a,include_docs:!0,attachments:!0,binary:!0});case 9:return c=e.sent,e.abrupt("return",c.rows.map((function(e){return e.doc})));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(x.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:return n=e.sent,e.next=5,n.get(t,{attachments:!0,binary:!0});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e,t){return We.apply(this,arguments)}function We(){return(We=Object(x.a)(h.a.mark((function e(t,n){var r,a,c,o,u;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:return r=e.sent,a=n.name,c=n.type,o={_id:N.generate(),orderId:t,name:a,createdAt:(new Date).toISOString(),_attachments:{file:{content_type:c,data:n}}},e.next=7,r.put(o);case 7:return u=e.sent,e.abrupt("return",Fe(u.id));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e){return Be.apply(this,arguments)}function Be(){return(Be=Object(x.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:return n=e.sent,e.next=5,n.get(t._id);case 5:return r=e.sent,e.abrupt("return",n.remove(r));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ge="https://tp-poc-api.herokuapp.com/api";function ze(){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Ge,"/orders"));case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(x.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Ge,"/tasks/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $e=n(212),Je=n(211),Xe=Object(c.createContext)();function Ye(e){var t=e.children,n=Object(c.useState)("info"),r=Object(E.a)(n,2),a=r[0],u=r[1],s=Object(c.useState)(""),i=Object(E.a)(s,2),l=i[0],p=i[1],f=Object(c.useState)(!1),d=Object(E.a)(f,2),m=d[0],b=d[1],v=function(e,t){p(e),u("success"),b(!0)},h=function(e,t){"clickaway"!==t&&b(!1)},x={showInfoAlert:function(e){return v(e)},showSuccessAlert:function(e){return v(e)},showWarningAlert:function(e){return v(e)},showErrorAlert:function(e){return v(e)}};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Xe.Provider,{value:x},t,o.a.createElement($e.a,{message:l,open:m,autoHideDuration:6e3,onClose:h},o.a.createElement(Je.a,{elevation:6,variant:"filled",onClose:h,severity:a},l))))}function qe(){var e=Object(c.useContext)(Xe),t=e.showSuccessAlert,n=e.showErrorAlert,r=Object(c.useState)(z),a=Object(E.a)(r,2),u=a[0],s=a[1],i=Object(c.useState)(!1),l=Object(E.a)(i,2),p=l[0],f=l[1];Object(c.useEffect)((function(){function e(){return(e=Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce();case 3:t=e.sent,s(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var d=function(){var e=Object(x.a)(h.a.mark((function e(r){var a,c,o,i,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,ze();case 4:if(!((a=e.sent).length>0)){e.next=19;break}return e.next=8,Promise.all(a.map((function(e){return de(Object(b.a)({},e,{_id:e.id}))})));case 8:return c=e.sent,o=c.map((function(e){return e._id})),e.next=12,Promise.all(o.map((function(e){return Me(e)})));case 12:return i=e.sent,e.next=15,Promise.all(i.flat().map((function(e){return Ee(Object(b.a)({},e,{_id:Ee.id}))})));case 15:return e.next=17,ue(Object(b.a)({},u,{downloadDisabled:!0,uploadDisabled:!1,deleteDisabled:!1}));case 17:l=e.sent,s(l);case 19:t("Data loaded from server successfuly"),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),n("Error loading data from server"),console.error(e.t0);case 26:return e.prev=26,f(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[0,22,26,29]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(x.a)(h.a.mark((function e(r){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,re();case 4:return e.next=6,ue(Object(b.a)({},u,{downloadDisabled:!0,uploadDisabled:!0,deleteDisabled:!1}));case 6:a=e.sent,s(a),t("Data synced back to server successfuly"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),n("Error syncing data back to server"),console.error(e.t0);case 15:return e.prev=15,f(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,11,15,18]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(x.a)(h.a.mark((function e(r){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,Z();case 4:return a=e.sent,console.log(a),e.t0=s,e.next=9,ce();case 9:e.t1=e.sent,(0,e.t0)(e.t1),t("Local database cleaned successfuly"),e.next=18;break;case 14:e.prev=14,e.t2=e.catch(0),n("Error cleaning local database"),console.error(e.t2);case 18:return e.prev=18,f(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[0,14,18,21]])})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement("div",null,o.a.createElement(O.a,{container:!0,spacing:2},o.a.createElement(O.a,{item:!0,xs:12},o.a.createElement(w.a,{variant:"h5"},"Home")),o.a.createElement(O.a,{item:!0,xs:12},o.a.createElement(y.a,{variant:"contained",color:"default",startIcon:o.a.createElement(k.a,null),onClick:d,disabled:u.downloadDisabled||p},"Load data from server")),o.a.createElement(O.a,{item:!0,xs:12},o.a.createElement(y.a,{variant:"contained",color:"default",startIcon:o.a.createElement(C.a,null),onClick:m,disabled:u.uploadDisabled||p},"Sync local data to server")),o.a.createElement(O.a,{item:!0,xs:12},o.a.createElement(y.a,{variant:"contained",color:"default",startIcon:o.a.createElement(A.a,null),onClick:v,disabled:u.deleteDisabled||p},"Clean my local data")),p&&o.a.createElement(O.a,{item:!0,xs:12,container:!0,direction:"column",justify:"center",alignItems:"center"},o.a.createElement(j.a,{size:40,style:{marginTop:50}}))))}var Ke=n(154),Qe=n(156),Ze=n(114),et=n(199),tt=n(200),nt=n(201),rt=n(202),at=n(108),ct=n.n(at),ot=Object(p.a)((function(e){return{inputFile:{display:"none"},icon:{color:"rgba(255, 255, 255, 0.54)"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},backdropContent:{maxWidth:"95%",maxHeight:"95%"}}}));function ut(e){var t=e.orderId,n=ot(),r=Object(c.useContext)(Xe),a=r.showSuccessAlert,u=r.showErrorAlert,s=function(e,t){var n=Object(c.useState)(!1),r=Object(E.a)(n,2),a=r[0],o=r[1],u=Object(c.useState)(!1),s=Object(E.a)(u,2),i=s[0],l=s[1],p=Object(c.useState)(t),f=Object(E.a)(p,2),d=f[0],m=f[1],b=Object(c.useState)(0),v=Object(E.a)(b,2),O=v[0],w=v[1];return Object(c.useEffect)((function(){function t(){return(t=Object(x.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),o(!1),t.prev=2,t.t0=m,t.next=6,ke(e);case 6:t.t1=t.sent,(0,t.t0)(t.t1),t.next=14;break;case 10:t.prev=10,t.t2=t.catch(2),console.error(t.t2),o(!0);case 14:l(!1);case 15:case"end":return t.stop()}}),t,null,[[2,10]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e,O]),[d,i,a,function(){w(Date.now().valueOf())}]}(t,[]),i=Object(E.a)(s,4),l=i[0],p=i[1],f=i[2],d=i[3],m=Object(c.useState)(!1),b=Object(E.a)(m,2),v=b[0],w=b[1],y=Object(c.useState)(!1),j=Object(E.a)(y,2),g=j[0],k=j[1],S=function(e){return function(){k(e),w(!v)}},C=function(){var e=Object(x.a)(h.a.mark((function e(n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=document.getElementById("input-image-file")).files||!r.files[0]){e.next=7;break}return e.next=5,Ae(t,r.files[0]);case 5:d(),a("Image uploaded");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),u("Error uploading image (".concat(e.t0.message,")"));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),I=function(e){return function(){var t=Object(x.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,De(e);case 3:d(),a("Image removed"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),u("Error removing image (".concat(t.t0.message,")"));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ke.a,{className:n.backdrop,open:v,onClick:function(){w(!1)}},g&&o.a.createElement("img",{className:n.backdropContent,src:g,alt:""})),o.a.createElement(O.a,{item:!0,container:!0,xs:12,direction:"row",justify:"flex-end"},o.a.createElement(O.a,{item:!0},o.a.createElement("input",{type:"file",accept:"image/*",id:"input-image-file",className:n.inputFile,onChange:C}),o.a.createElement("label",{htmlFor:"input-image-file"},o.a.createElement(Qe.a,{color:"primary",component:"span"},o.a.createElement(ct.a,null))))),o.a.createElement(O.a,{item:!0,xs:12},o.a.createElement(Ze.a,{elevation:1},o.a.createElement(et.a,{cellHeight:180,cols:3},o.a.createElement(tt.a,{key:"subheader-image",cols:3,style:{height:"auto"}},o.a.createElement(nt.a,{component:"div",color:"primary",style:{backgroundColor:"#E5E5E5"}},"Images",p||0!==l.length?"":" (No items to display)",p?" (Loading...)":"",f?" (Error loading images)":"")),l&&l.map((function(e){var t=URL.createObjectURL(e._attachments.file.data);return o.a.createElement(tt.a,{key:e._id,cols:1,onClick:S(t)},o.a.createElement("img",{src:t,alt:e.name}),o.a.createElement(rt.a,{title:e.name,subtitle:e.location?"".concat(e.location.lat,", ").concat(e.location.lng):"No location",actionIcon:o.a.createElement(Qe.a,{className:n.icon,onClick:I(e)},o.a.createElement(A.a,null))}))}))))))}var st=n(203),it=n(204),lt=n(205),pt=n(210),ft=n(206),dt=n(152),mt=n(149),bt=n(213),vt=n(151),ht=n(207),xt=n(109),Et=n.n(xt);function Ot(e){var t=e.orderId,n=Object(c.useContext)(Xe),r=n.showSuccessAlert,a=n.showErrorAlert,u=function(e,t){var n=Object(c.useState)(!1),r=Object(E.a)(n,2),a=r[0],o=r[1],u=Object(c.useState)(!1),s=Object(E.a)(u,2),i=s[0],l=s[1],p=Object(c.useState)(t),f=Object(E.a)(p,2),d=f[0],m=f[1],b=Object(c.useState)(0),v=Object(E.a)(b,2),O=v[0],w=v[1];return Object(c.useEffect)((function(){function t(){return(t=Object(x.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),o(!1),t.prev=2,t.t0=m,t.next=6,be(e);case 6:t.t1=t.sent,(0,t.t0)(t.t1),t.next=14;break;case 10:t.prev=10,t.t2=t.catch(2),console.error(t.t2),o(!0);case 14:l(!1);case 15:case"end":return t.stop()}}),t,null,[[2,10]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e,O]),[d,i,a,function(){w(Date.now().valueOf())}]}(t,[]),s=Object(E.a)(u,4),i=s[0],l=s[1],p=s[2],f=s[3],d=Object(c.useState)(!1),m=Object(E.a)(d,2),v=m[0],w=m[1],j=Object(c.useState)(!1),g=Object(E.a)(j,2),k=g[0],S=g[1],C=function(){w(!1)},I=function(){var e=Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee({orderId:t,description:k});case 3:C(),f(),r("Task added"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a("Error addding task (".concat(e.t0.message,")"));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),_=function(e){return function(){var t=Object(x.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,we(Object(b.a)({},e,{completed:n.target.checked}));case 3:f(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),a("Error completiing task (".concat(t.t0.message,")"));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},D=function(e){return function(){var t=Object(x.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,je(e);case 3:f(),r("Task removed"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a("Error removing task (".concat(t.t0.message,")"));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()};return o.a.createElement(o.a.Fragment,null,o.a.createElement(O.a,{item:!0,container:!0,xs:12,direction:"row",justify:"flex-end"},o.a.createElement(O.a,{item:!0},o.a.createElement(Qe.a,{color:"primary",component:"span",onClick:function(){w(!0)}},o.a.createElement(Et.a,null)))),o.a.createElement(st.a,{open:v,onClose:C,fullWidth:!0},o.a.createElement(it.a,{style:{backgroundColor:"#E5E5E5"}},"New Task"),o.a.createElement(lt.a,null,o.a.createElement(pt.a,{autoFocus:!0,id:"description",label:"Description",fullWidth:!0,onChange:function(e){S(e.target.value)}})),o.a.createElement(ft.a,null,o.a.createElement(y.a,{onClick:C,color:"primary"},"Cancel"),o.a.createElement(y.a,{onClick:I,color:"primary"},"Add Task"))),o.a.createElement(O.a,{item:!0,xs:12},o.a.createElement(Ze.a,{elevation:1},o.a.createElement(dt.a,{subheader:o.a.createElement(nt.a,{color:"primary",style:{backgroundColor:"#E5E5E5"}},"Tasks",l||0!==i.length?"":" (No items to display)",l?" (Loading...)":"",p?" (Error loading tasks)":"")},i&&i.map((function(e){return o.a.createElement(mt.a,{key:e._id},o.a.createElement(bt.a,{edge:"start",onChange:_(e),checked:e.completed}),o.a.createElement(vt.a,{primary:e.description}),o.a.createElement(ht.a,null,o.a.createElement(Qe.a,{onClick:D(e)},o.a.createElement(A.a,null))))}))))))}var wt=n(110),yt=n.n(wt),jt=Object(p.a)((function(e){return{inputFile:{display:"none"},icon:{color:"rgba(255, 255, 255, 0.54)"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},backdropContent:{maxWidth:"95%",maxHeight:"95%"}}}));function gt(e){var t=e.orderId,n=jt(),r=Object(c.useContext)(Xe),a=r.showSuccessAlert,u=r.showErrorAlert,s=function(e,t){var n=Object(c.useState)(!1),r=Object(E.a)(n,2),a=r[0],o=r[1],u=Object(c.useState)(!1),s=Object(E.a)(u,2),i=s[0],l=s[1],p=Object(c.useState)(t),f=Object(E.a)(p,2),d=f[0],m=f[1],b=Object(c.useState)(0),v=Object(E.a)(b,2),O=v[0],w=v[1];return Object(c.useEffect)((function(){function t(){return(t=Object(x.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),o(!1),t.prev=2,t.t0=m,t.next=6,Le(e);case 6:t.t1=t.sent,(0,t.t0)(t.t1),t.next=14;break;case 10:t.prev=10,t.t2=t.catch(2),console.error(t.t2),o(!0);case 14:l(!1);case 15:case"end":return t.stop()}}),t,null,[[2,10]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e,O]),[d,i,a,function(){w(Date.now().valueOf())}]}(t,[]),i=Object(E.a)(s,4),l=i[0],p=i[1],f=i[2],d=i[3],m=Object(c.useState)(!1),b=Object(E.a)(m,2),v=b[0],w=b[1],y=Object(c.useState)(""),j=Object(E.a)(y,2),g=j[0],k=j[1],S=function(e){return function(){k(e),w(!v)}},C=function(){var e=Object(x.a)(h.a.mark((function e(n){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r=document.getElementById("input-video-file")).files||!r.files[0]){e.next=7;break}return e.next=5,Re(t,r.files[0]);case 5:d(),a("Video uploaded");case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),u("Error uploading video (".concat(e.t0.message,")"));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),I=function(e){return function(){var t=Object(x.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,He(e);case 3:d(),a("Video removed"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),u("Error removing video (".concat(t.t0.message,")"));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ke.a,{className:n.backdrop,open:v,onClick:function(){k(""),w(!1)}},g&&o.a.createElement("video",{controls:!0,className:n.backdropContent},o.a.createElement("source",{src:g}),o.a.createElement("p",null,"This browser does not support the video element"))),o.a.createElement(O.a,{item:!0,container:!0,xs:12,direction:"row",justify:"flex-end"},o.a.createElement(O.a,{item:!0},o.a.createElement("input",{type:"file",accept:"video/*",id:"input-video-file",className:n.inputFile,onChange:C}),o.a.createElement("label",{htmlFor:"input-video-file"},o.a.createElement(Qe.a,{color:"primary",component:"span"},o.a.createElement(yt.a,null))))),o.a.createElement(O.a,{item:!0,xs:12},o.a.createElement(Ze.a,{elevation:1},o.a.createElement(et.a,{cellHeight:180,cols:3},o.a.createElement(tt.a,{key:"subheader-video",cols:3,style:{height:"auto"}},o.a.createElement(nt.a,{component:"div",color:"primary",style:{backgroundColor:"#E5E5E5"}},"Videos",p||0!==l.length?"":" (No items to display)",p?" (Loading...)":"",f?" (Error loading videos)":"")),l&&l.map((function(e){var t=URL.createObjectURL(e._attachments.file.data);return o.a.createElement(tt.a,{key:e._id,cols:1,onClick:S(t)},o.a.createElement("video",{height:180,controls:!1},o.a.createElement("source",{type:e._attachments.file.content_type,src:t}),o.a.createElement("p",null,"This browser does not support the video element")),o.a.createElement(rt.a,{title:e.name,actionIcon:o.a.createElement(Qe.a,{className:n.icon,onClick:I(e)},o.a.createElement(A.a,null))}))}))))))}function kt(){var e=Object(d.f)().id,t=function(e,t){var n=Object(c.useState)(!1),r=Object(E.a)(n,2),a=r[0],o=r[1],u=Object(c.useState)(!1),s=Object(E.a)(u,2),i=s[0],l=s[1],p=Object(c.useState)(t),f=Object(E.a)(p,2),d=f[0],m=f[1],b=Object(c.useState)(0),v=Object(E.a)(b,2),O=v[0],w=v[1];return Object(c.useEffect)((function(){function t(){return(t=Object(x.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),o(!1),t.prev=2,t.t0=m,t.next=6,pe(e);case 6:t.t1=t.sent,(0,t.t0)(t.t1),t.next=14;break;case 10:t.prev=10,t.t2=t.catch(2),console.error(t.t2),o(!0);case 14:l(!1);case 15:case"end":return t.stop()}}),t,null,[[2,10]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e,O]),[d,i,a,function(){w(Date.now().valueOf())}]}(e),n=Object(E.a)(t,3),r=n[0],a=n[1],u=n[2];return o.a.createElement("div",null,u&&o.a.createElement("div",null,"Something went wrong ..."),a&&o.a.createElement("div",null,"Loading..."),!a&&!r&&o.a.createElement(w.a,{variant:"subtitle1"},"Order not found"),r&&o.a.createElement(O.a,{container:!0,spacing:2},o.a.createElement(O.a,{item:!0,xs:12},o.a.createElement(w.a,{variant:"h5"},r.description)),o.a.createElement(Ot,{orderId:e}),o.a.createElement(ut,{orderId:e}),o.a.createElement(gt,{orderId:e})))}var St=n(111),Ct=n.n(St);function It(){var e=Object(d.g)().url,t=function(e){var t=Object(c.useState)(!1),n=Object(E.a)(t,2),r=n[0],a=n[1],o=Object(c.useState)(!1),u=Object(E.a)(o,2),s=u[0],i=u[1],l=Object(c.useState)(e),p=Object(E.a)(l,2),f=p[0],d=p[1],m=Object(c.useState)(0),b=Object(E.a)(m,2),v=b[0],O=b[1];return Object(c.useEffect)((function(){function e(){return(e=Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),a(!1),e.prev=2,e.t0=d,e.next=6,ie();case 6:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 10:e.prev=10,e.t2=e.catch(2),console.error(e.t2),a(!0);case 14:i(!1);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[v]),[f,s,r,function(){O(Date.now().valueOf())}]}([]),n=Object(E.a)(t,3),r=n[0],a=n[1],u=n[2];return o.a.createElement("div",null,o.a.createElement(O.a,{container:!0,spacing:2},o.a.createElement(O.a,{item:!0,xs:12},o.a.createElement(w.a,{variant:"h5"},"Work Orders")),o.a.createElement(O.a,{item:!0,xs:12},u&&o.a.createElement("div",null,"Something went wrong ..."),a&&o.a.createElement("div",null,"Loading..."),!a&&0===r.length&&o.a.createElement(w.a,{variant:"subtitle1"},"No orders to display"),r.length>0&&o.a.createElement(Ze.a,{elevation:1},o.a.createElement(dt.a,null,r.map((function(t){return o.a.createElement(mt.a,{key:t._id,button:!0,component:f.b,to:"".concat(e,"/").concat(t._id)},o.a.createElement(vt.a,{primary:t.description,secondary:t.station}),o.a.createElement(ht.a,null,o.a.createElement(Qe.a,{color:"inherit"},o.a.createElement(Ct.a,null))))})))))))}function At(){var e=Object(d.g)().path;return o.a.createElement(d.c,null,o.a.createElement(d.a,{exact:!0,path:e},o.a.createElement(It,null)),o.a.createElement(d.a,{path:"".concat(e,"/:id")},o.a.createElement(kt,null)))}var _t=Object(p.a)((function(e){return{main:{paddingTop:e.spacing(2)}}}));function Dt(){var e=_t();return o.a.createElement(f.a,{basename:"/"},o.a.createElement(l.a,null),o.a.createElement(Ye,null,o.a.createElement(m.a,null),o.a.createElement(i.a,{maxWidth:"md"},o.a.createElement("main",{className:e.main},o.a.createElement(d.c,null,o.a.createElement(d.a,{exact:!0,path:"/"},o.a.createElement(qe,null)),o.a.createElement(d.a,{path:"/orders"},o.a.createElement(At,null)))))))}n(147);s.a.render(o.a.createElement(Dt,null),document.getElementById("root")),a()({brandName:"My Work"})},93:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=n(9),a=n(153),c=n(156),o=n(113),u=n(159),s=n(155),i=n(54),l=n(104),p=n.n(l),f=n(0),d=n.n(f),m=n(94),b=n(101),v=Object(o.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function h(){var t=v(),n=e.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent),o=Object(f.useState)(!1),l=Object(r.a)(o,2),h=l[0],x=l[1],E=function(e){return function(t){(!t||"keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&h!==e&&x(e)}};return d.a.createElement("div",{className:t.root},d.a.createElement(a.a,{position:"static"},d.a.createElement(u.a,{anchor:"left",open:h,onOpen:E(!0),onClose:E(!1),disableBackdropTransition:!n,disableDiscovery:n},d.a.createElement(m.a,null)),d.a.createElement(s.a,null,d.a.createElement(c.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",onClick:E(!0)},d.a.createElement(p.a,null)),d.a.createElement(i.a,{variant:"h6",className:t.title},"My Work App"),d.a.createElement(b.a,null))))}}).call(this,n(86))},94:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(149),a=n(150),c=n(151),o=n(113),u=n(152),s=n(100),i=n.n(s),l=n(99),p=n.n(l),f=n(0),d=n.n(f),m=n(37);function b(e){var t=e.icon,n=e.primary,o=e.to,u=d.a.useMemo((function(){return d.a.forwardRef((function(e,t){return d.a.createElement(m.b,Object.assign({to:o,ref:t},e))}))}),[o]);return d.a.createElement("li",null,d.a.createElement(r.a,{button:!0,component:u},t?d.a.createElement(a.a,null,t):null,d.a.createElement(c.a,{primary:n})))}var v=Object(o.a)((function(e){return{root:{flexGrow:1,width:180}}}));function h(){var e=v();return d.a.createElement("div",{className:e.root},d.a.createElement(u.a,null,d.a.createElement(b,{to:"/",primary:"Home",icon:d.a.createElement(p.a,null)}),d.a.createElement(b,{to:"/orders",primary:"Orders",icon:d.a.createElement(i.a,null)})))}}},[[124,1,2]]]);
//# sourceMappingURL=main.480f8903.chunk.js.map